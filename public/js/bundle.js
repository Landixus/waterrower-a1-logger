!function(e){var t={};function a(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(s,n,function(t){return e[t]}.bind(null,n));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t);const s=2.8;var n={calcWatt:function(e){return s/Math.pow(e,3)},sessionNameToReadable:function(e){return moment(e.slice(0,13)+":"+e.slice(13,15)+":"+e.slice(15)).format("YYYY-MM-DD hh:mm:ss")},getHeartRateColor:function(e){return e<125?"text-success":e<150?"text-primary":e<175?"text-warning":"text-danger"},getUrlParameter:function(e){var t,a,s=decodeURIComponent(window.location.search.substring(1)).split("&");for(a=0;a<s.length;a++)if((t=s[a].split("="))[0]===e)return void 0===t[1]||t[1]},fmtMSS:function(e){var t=new Date(null);return t.setSeconds(e),t.toISOString().substr(11,8)},QueryString:function(e){for(var t={},a=(e.split("?")[1]||"").split("&"),s=0;s<a.length;s++){var n=a[s].split("=");if(void 0===t[n[0]])t[n[0]]=decodeURIComponent(n[1]);else if("string"==typeof t[n[0]]){var o=[t[n[0]],decodeURIComponent(n[1])];t[n[0]]=o}else t[n[0]].push(decodeURIComponent(n[1]))}return t}},o={livePoints:[],liveMap:void 0,liveBounds:void 0};const i=[{featureType:"landscape",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",stylers:[{saturation:-100},{lightness:51},{visibility:"simplified"}]},{featureType:"road.highway",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"road.arterial",stylers:[{saturation:-100},{lightness:30},{visibility:"on"}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"on"},{lightness:-25},{saturation:-100}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]}];function r(){var e=document.getElementById("live-map");e&&(o.liveMap=new google.maps.Map(e,{zoom:8,maxZoom:16}),o.liveBounds=new google.maps.LatLngBounds,o.liveMap.set("styles",i))}function l(e){return new google.maps.Polyline({path:e,strokeColor:"#FF00AA",strokeOpacity:.7,strokeWeight:4})}var d=function(e,t){e&&$.ajax({type:"GET",url:"/sessions/"+e+".gpx",success:function(e){var a=[],s=new google.maps.Map(t[0],{zoom:16});s.set("styles",i);var n=new google.maps.LatLngBounds;$(e).find("trkpt").each(function(){var e=$(this).attr("lat"),t=$(this).attr("lon"),s=new google.maps.LatLng(e,t);a.push(s),n.extend(s)}),l(a).setMap(s),s.fitBounds(n)}})};var c={cleanMap:function(){r(),o.livePoints=[],l(o.livePoints).setMap(o.liveMap),"function"==typeof o.liveMap.fitBounds&&o.liveMap.fitBounds(o.liveBounds)},initMap:r,styles:i,addRouteTrackToMap:function(e,t){e&&$.ajax({type:"GET",url:"/routes/"+e,success:function(e){var a=[],s=new google.maps.Map(t[0],{zoom:8,maxZoom:16});s.set("styles",i);var n=new google.maps.LatLngBounds;e.gps.forEach(function(e){var t=e.lat,s=e.lon,o=new google.maps.LatLng(t,s);a.push(o),n.extend(o)}),l(a).setMap(s),s.fitBounds(n)}})},addGpxTrackToMap:d,loadGpxMap:function(){var e=$(this).data("name"),t=$(this).find(".card-map-top");d(e,t)},createPolyLine:l};const u=100/4.805*6,p=10;var f={RATION:u,PAGE_SIZE:p,UPDATE_FREQ:1e3,run:!1};var v={addGraph:function(e,t,a,s){for(var o=[],i=[],r=[],l=1,d=1;d<e.length;d++){var c=parseInt(e[d]),p=parseInt(s[l]),f=(c-a)/1e3,v=u/100;o.push(v/f*3.6);var m=n.calcWatt(f/v);i.push(m),r.push(6e4/(p-parseInt(s[l-1]))),a=parseInt(e[d]),c>p&&l++}var h=[],g=[],y=[],b=[],w=[],x=10;for(e.length>1e3&&(x=20);e.length;){var I,k=e.splice(0,x),M=parseInt(k.reduce(function(e,t){return e+t})/k.length);if(w.push(new Date(M).toISOString().substr(new Date(M).toISOString().lastIndexOf("T")+1,8)),t&&(I=t.splice(0,x)).length>0&&g.push(parseInt(I.reduce(function(e,t){return e+t})/I.length)),r&&(I=r.splice(0,x)).length>0&&b.push(Math.round(10*parseFloat(I.reduce(function(e,t){return e+t})/I.length))/10),o){var S=o.splice(0,x),T=i.splice(0,x);S.length>0&&h.push(Math.round(10*parseFloat(S.reduce(function(e,t){return e+t})/S.length))/10),T.length>0&&y.push(Math.round(10*parseFloat(T.reduce(function(e,t){return e+t})/T.length))/10)}}var R=$("#hr-graph"),N={labels:w,datasets:[{label:"Heart rate (bpm)",borderColor:"#dc3545",backgroundColor:"#dc3545",fill:!1,data:g,yAxisID:"y-axis-1"},{label:"Speed (km/t)",borderColor:"#007bff",backgroundColor:"#007bff",fill:!1,data:h,yAxisID:"y-axis-2"},{label:"Watt",borderColor:"#4bc0c0",backgroundColor:"#4bc0c0",fill:!1,data:y,lineTension:0,yAxisID:"y-axis-3"},{label:"Stroke rate (spm)",borderColor:"#9966FF",backgroundColor:"#9966FF",fill:!1,data:b,yAxisID:"y-axis-4"}]};Chart.Line(R,{data:N,options:{responsive:!0,hoverMode:"index",stacked:!1,scales:{yAxes:[{type:"linear",display:!0,position:"left",id:"y-axis-1",ticks:{suggestedMin:30,min:0,stepSize:5}},{type:"linear",display:!0,position:"right",id:"y-axis-2",ticks:{stepSize:2},gridLines:{drawOnChartArea:!1}},{type:"linear",display:!0,position:"right",id:"y-axis-3",ticks:{stepSize:25},gridLines:{drawOnChartArea:!1}},{type:"linear",display:!0,position:"right",id:"y-axis-4",ticks:{stepSize:2,suggestedMin:10},gridLines:{drawOnChartArea:!1}}]}}})}},m=function(e,t,a){return e+="<tr>",e+='<th scope="row">'+(t+1)+"</th>",e+='<td><a data-toggle="modal" data-route-name="'+a.name+'" data-target="#show-route-modal" href="/routes/'+a.name+'">'+a.name+"</a></td>",e+="<td>"+parseInt(a.meters)+"m</td>",e+="<td>"+a.country+"</td>",e+="<td>",!0!==a.permanent&&(e+='<a class="edit-route" href="#" data-id="'+a.name+'"><i class="material-icons">create</i></a><a class="del-route" href="#" data-id="'+a.name+'"><i aria-hidden="true" title="Delete route" class="material-icons">delete</i></a></td>'),e+="</tr>"};function h(e){$("#load").load("/route",function(){$(this).find("#routes-t").each(function(){y(0),g($("#routes-table").find(".page")[0],e)})})}function g(e,t){var a=$('<ul id="route-page" data-index="'+t+'"></ul>').addClass("pagination pagination-lg");$.get("routes/size",function(s){var n=parseInt(parseInt(s)/p)+1,o=t===n-1?"disabled":"",i=$('<li class="page-item '+(0===t?"disabled":"")+'"></li>').append('<a class="page-link" href="#" data-next="-1" tabindex="-1">Previous</a>'),r=$('<li class="page-item '+o+'"></li>').append('<a class="page-link" data-next="1" href="#">Next</a>');a.append(i);for(var l=0;l<n;l++){var d="";t===l&&(d="active");var c=$('<li class="page-item '+d+'"><a class="page-link" data-index="'+l+'" href="#">'+(l+1)+"</a></li>");a.append(c)}a.append(r),$(e).html(a)})}function y(e){var t=e*p,a=(e+1)*p-1;$.get("/routes/"+t+"/"+a,function(t){var a="",s=0;t.forEach(function(t){a=m(a,s+e*p,t),s++}),$("#routes-table-body").html(a),$("#add-route-modal").on("hidden.bs.modal",function(e){h(0)})})}var b={loadRoutes:function(){var e=this;$.get("/row/routes",function(t){var a="",s="";t.sort(function(e,t){return e.country>t.country?1:t.country>e.country?-1:0});var n='selected="selected"';t.forEach(function(e){e.country!==s&&(a+='<optgroup label="'+e.country+'">',s=e.country),a+="<option "+n+' value="'+e.index+'" data-name="'+e.name+'" data-lat="'+e.gps[0].lat+'" data-lon="'+e.gps[0].lon+'">'+e.name+" ("+e.meters+"m)</option>",n=""}),$(e).html(a),n=$("#routes").find(":selected"),c.cleanMap();var o=n.data("name");c.addRouteTrackToMap(o,$("#live-map"))})},createRouteRecord:m,loadRoute:h,loadRouteTable:y,createRouteNavPage:g,editRoute:function(e){e.preventDefault();var t=$(this).data("id");$.ajax({url:"/routes/"+t,type:"GET",success:function(e){var t=$("#addRoute");t.find("#name").val(e.name),t.find("#meters").val(e.meters),t.find("#segmentId").val(e.segmentId),t.find("#countries").val(e.country);var a=JSON.stringify(e.gps);t.find("#gps").append(a),$("#add-route-modal").modal("show")}})},showRouteModal:function(e){var t=$(e.relatedTarget).data("route-name"),a=$(this);$.get("/routes/"+t,function(e){var t=e.name;e.segementId&&(t='<a target="_blank" href="https://www.strava.com/segments/'+e.segementId+'">'+t+" </a>"),a.find("#show-route-modal-title").html(t);var s='<li class="list-group-item"><h5 class="card-title">Display Lenght:</h5>'+e.meters+" m</li>";s+='<li class="list-group-item"><h5 class="card-title">Gps Lenght:</h5>'+e.gpsLenght+" m</li>",s+='<li class="list-group-item"><h5 class="card-title">Country:</h5>'+e.country+"</li>",a.find(".card .list-group").html(s)})}};var w={loadUsers:function(){var e=this;$.get("/users",function(t){var a="";t.forEach(function(e){a+='<option value="'+e.id+'">'+e.firstName+" "+e.lastName+"</option>"}),$(e).html(a)})},loadUser:function e(){$("#load").load("/user",function(){$(this).find("#users-body").each(function(){var t=this;$.get("/users/",function(a){for(var s="",n=0;n<a.length;n++){var o=a[n];s+='<tr><td><a href="#" data-id="'+o.id+'">'+(n+1)+"</a></td><td>"+o.firstName+"</td><td>"+o.lastName+"</td>",s+='<td><a class="edit-user" href="#" data-id="'+o.id+'"><i class="material-icons">create</i></a><a class="del-user" href="#" data-id="'+o.id+'"><i aria-hidden="true" title="Delete user" class="material-icons">delete</i></a></td></tr>'}$(t).html(s),$("#addUserModal").on("hidden.bs.modal",function(t){e()})})})})},editUser:function(e){e.preventDefault();var t=$(this).data("id");$.ajax({url:"/users/"+t,type:"GET",success:function(e){var t=$("#addUserForm");t.find("#firstName").val(e.firstName),t.find("#lastName").val(e.lastName),t.find("#userId").val(e.id),$.get("/strava/url",function(t){var a=t.url.replace("%24",e.id);$(".strava-url").attr("href",a)}),$(".strava-connect").removeClass("sr-only"),$("#addUserModal").modal("show")}})}};function x(e){$("#load").load("/history",function(){$(this).find("#history").each(function(){$.get("/session/0/2",function(e){var t="";e.forEach(function(e){t=k(t,e)}),$("#cards").html('<div class="col"><div class="card-deck">'+t+"</div></div>"),$(".gpx-track").each(function(){$(this).trigger("load-map",this)})}),I($(this),e)})})}function I(e,t){var a=t*p,s=(t+1)*p-1;$.get("/session/"+a+"/"+s,function(a){$.get("/users",function(s){var n="",o=0,i=s.reduce(function(e,t){return e[t.id]=t,e},{});a.forEach(function(e){n=M(n,o+t*p,e,i),o++}),$("#histor-table-body").html(n),function(e,t){var a=$('<ul id="history-page" data-index="'+t+'"></ul>').addClass("pagination pagination-lg");$.get("session/size",function(s){var n=parseInt(parseInt(s)/p)+1,o=0===t?"disabled":"",i=t===n-1?"disabled":"",r=$('<li class="page-item '+o+'"></li>').append('<a class="page-link" href="#" data-next="-1" tabindex="-1">Previous</a>'),l=$('<li class="page-item '+i+'"></li>').append('<a class="page-link" data-next="1" href="#">Next</a>');a.append(r);for(var d=0;d<n;d++){var c="";t===d&&(c="active");var u=$('<li class="page-item '+c+'"><a class="page-link" data-index="'+d+'" href="#">'+(d+1)+"</a></li>");a.append(u)}a.append(l),$(e).html(a)})}(e.find(".page"),t)})})}var k=function(e,t){return e+='<div class="card gpx-track" data-name="'+t.name+'"">',e+='<div class="card-body">',e+='<div class="card-map-top "></div>',e+='<h5 class="card-title mt-2"><a class="sessions" data-name="'+t.name+'" href="/session">'+n.sessionNameToReadable(t.name)+"</a></h5>",e+='<p class="card-text">Length: '+parseInt(t.endStats.meters)+"m, Time: "+n.fmtMSS(parseInt(t.endStats.seconds))+"</p>",e+='<a href="/strava/upload/'+t.name+'" class="btn btn-primary strava btn-block">Upload to Strava</a>',e+="</div>",e+="</div>"},M=function(e,t,a,s){var o=s[a.user];return e+="<tr>",e+='<th scope="row">'+(t+1)+"</th>",e+='<td><a class="sessions" data-name="'+a.name+'" href="/?name='+a.name+'#session">'+n.sessionNameToReadable(a.name)+"</a></td>",e+="<td>Length: "+parseInt(a.endStats.meters)+"m</td>",e+=o?"<td>"+o.firstName+" "+o.lastName+"</td>":"<td></td>",e+='<td> <a href="/sessions/'+a.name+'.gpx"><i class="material-icons md-36">file_download</i><a class="strava" href="/strava/upload/'+a.name+'"><i aria-hidden="true" title="Upload to Strava" class="material-icons md-36">cloud_upload</i></a> <a class="del-session" href="#" data-name="'+a.name+'"><i aria-hidden="true" title="Delete session local" class="material-icons md-36">delete</i></a></td>',e+="</tr>"};var S={loadHistoryIndex:function(e){x(e)},loadHistory:x,loadHistoryList:I,openHistory:function(e){e.preventDefault();var t=parseInt($(this).data("next")),a=parseInt($(this).data("index")),s=parseInt($("#history-page").data("index"));isNaN(t)?isNaN(a)||(s=a):s+=t,I($("#history-table"),s)}};function T(e){$("#load").load("/sessions",function(){$(this).find("#routes").each(b.loadRoutes),$(this).find("#session-user").each(w.loadUsers),$(this).find("#history-session").each(function(){$.get("/session/"+e,function(t){var a=P.getHtml("History",t.endStats,!0);$("#routes").val(t.route),$("#session-user").val(t.user),a&&($("#table-content").html(a),$("#laps-body").html(R("History",t.endStats)),c.addGpxTrackToMap(e,$("#live-map"))),v.addGraph(t.raw,t.rawHr,parseInt(t.start),t.stroke)})})})}function R(e,t,a){var s="";if(parseInt(t.totalLaps)>0){var o=1,i=t.laps;a&&(i.reverse(),o=i.length),i.forEach(function(e){s+='<tr><th scope="row">'+o+"</th><td>"+parseInt(e.meters)+"</td><td>"+n.fmtMSS(parseInt(e.seconds))+"</td>",s+="<td>"+Math.round(10*parseFloat(e.watt))/10+"w</td></tr>",a?o--:o++})}return s}var N,U={loadSession:T,clickSession:function(e){e.preventDefault(),T($(this).data("name"))},getLapHtml:R};function C(e){$(window).scrollTop($("#main").offset().top),D(!0,"Rowing"),c.cleanMap(),$("#routes").attr("disabled","disabled"),$("#session-user").attr("disabled","disabled"),$("#startSimulator").attr("disabled","disabled"),$(e).attr("disabled","disabled"),$(e).html("Rowing..."),$(e).addClass("d-none"),$("#stopRow").removeClass("d-none")}function D(e,t){f.run=e,$.get("/row",function(e){var a=L(t,e);if(a){$("#table-content").html(a),$("#laps-body").html(U.getLapHtml(t,e,!0));var s=e.gps.lat,n=e.gps.lon,i=new google.maps.LatLng(s,n);if(o.livePoints.push(i),o.liveBounds)o.liveBounds.extend(i),c.createPolyLine(o.livePoints).setMap(o.liveMap),o.liveMap.fitBounds(o.liveBounds)}}).done(function(){f.run&&(N=setTimeout(function(){D(!0,t)},f.UPDATE_FREQ))})}function L(e,t,a){if(0!==parseInt(t.meters)){var s="";return a&&(s+='<div class="row"><div class="col-sm-4">Day</div><div class="col">'+t.start.substr(2,t.start.lastIndexOf("T")-2)+"</div></div>"),s+='<div class="row"><div class="col-sm-4">Start:</div><div class="col">'+t.start.substr(t.start.lastIndexOf("T")+1,8)+"</div></div>",s+='<div class="row"><div class="col-sm-4">Time:</div><div class="col">'+n.fmtMSS(parseInt(t.seconds))+"</div></div>",s+='<div class="row"><div class="col-sm-4">Length:</div><div class="col">'+parseInt(t.meters)+" m ("+parseInt(t.routeLap)+")</div></div>",s+='<div class="row"><div class="col-sm-4">Pace:</div><div class="col">'+Math.round(3.6*parseFloat(t.pace)*10)/10+" km/t</div></div>",s+='<div class="row"><div class="col-sm-4">500m:</div><div class="col">'+n.fmtMSS(parseInt(t.lapPace))+"</div></div>",s+='<div class="row"><div class="col-sm-4">2k:</div><div class="col">'+n.fmtMSS(parseInt(t.towKPace))+"</div></div>",s+='<div class="row"><div class="col-sm-4">Avg.W:</div><div class="col">'+Math.round(10*parseFloat(t.watt))/10+"w</div></div>",s+='<div class="row"><div class="col-sm-4">SR:</div><div class="col">'+Math.round(10*parseFloat(t.stroke))/10+"</div></div>",parseInt(t.hr)>0&&(s+='<div class="row"><div class="col-sm-4">HR:</div><div class="col '+n.getHeartRateColor(parseInt(t.hr))+'">'+parseInt(t.hr)+(parseInt(t.avgHr)>0?"("+parseInt(t.avgHr)+")":"")+"</div></div>"),t.fileName&&(s+='<div class="row"><div class="col">Actions:</div><div class="col"><a href="/sessions/'+t.fileName,s+='"><i class="material-icons">file_download</i><a class="strava" href="/strava/upload/'+t.name,s+='"><i aria-hidden="true" title="Upload to strava" class="material-icons">cloud_upload</i></a>',s+='<a class="sessions" data-name="'+t.name+'" href="/sessions"><i aria-hidden="true" title="Session" class="material-icons">fiber_new</i></a></div></div>'),s+""}}var P={loadMain:function(){$("#load").load("/main",function(){$(this).find("#routes").each(b.loadRoutes),$(this).find("#session-user").each(w.loadUsers),$.get("/row/status",function(e){if("ROWING"===e.status){var t=$("#startRow");n.getUrlParameter("test")&&(t=$("#startSimulator")),C(t)}}),n.getUrlParameter("test")&&$("#startRow").attr("id","startSimulator")})},start:C,get_rowInfo:D,getHtml:L,startRow:function(e){e.preventDefault();var t=$("#routes").val(),a=this;$.get("/row/start",{routes:t},function(){C(a)})},stopRow:function(e){e.preventDefault();var t=$(this);clearTimeout(N),f.run=!1;var a=$("#routes").val(),s=$("#session-user").val();$.get("/row/stop",{routes:a,user:s},function(e){$("#table-content").html(L(0,e,!1));var a=$("#startRow");a.removeAttr("disabled"),a.removeClass("d-none"),a.html("Start row"),t.addClass("d-none"),$("#routes").removeAttr("disabled"),$("#session-user").removeAttr("disabled"),$("#startSimulator").removeAttr("disabled")})}};window.QueryString=function(){for(var e={},t=window.location.search.substring(1).split("&"),a=0;a<t.length;a++){var s=t[a].split("=");if(void 0===e[s[0]])e[s[0]]=decodeURIComponent(s[1]);else if("string"==typeof e[s[0]]){var n=[e[s[0]],decodeURIComponent(s[1])];e[s[0]]=n}else e[s[0]].push(decodeURIComponent(s[1]))}return e}(),$(function(){P.get_rowInfo(!1,""),$(document).on("click",".main",function(e){P.loadMain()}),$(document).on("click","#user",function(e){w.loadUser()}),$(document).on("click","#history-page a",S.openHistory),$(document).on("click","#route-page a",function(e){e.preventDefault();var t=parseInt($(this).data("next")),a=parseInt($(this).data("index")),s=parseInt($("#route-page").data("index"));isNaN(t)?isNaN(a)||(s=a):s+=t;var n=$("#routes-table").find(".page");b.createRouteNavPage(n[0],s),b.loadRouteTable(s)}),$(document).on("click",".nav-link",function(e){$("#main-nav").find(".nav-item").each(function(){$(this).removeClass("active")}),$(this).parent().addClass("active")}),$(document).on("click",".sessions",U.clickSession),$(document).on("click","a#history",function(e){S.loadHistoryIndex(0,0)}),$(document).on("click","a#route",function(e){b.loadRoute(0)}),$(document).on("load-map",".gpx-track",c.loadGpxMap),$(document).on("click","button#startRow",P.startRow),$(document).on("click","button#stopRow",P.stopRow),$(document).on("click",".edit-user",w.editUser),$(document).on("click",".edit-route",b.editRoute),$(document).on("click",".strava",function(e){e.preventDefault();var t=$(this).attr("href");$.get(t,function(e){console.log(e),alert("Uploaded to strava!")})}),$(document).on("click",".del-session",function(e){e.preventDefault();var t=$(this).data("name");confirm("Are you sure you want to delete session?")&&$.ajax({url:"/session/del/"+t,type:"DELETE",success:function(e){alert("Session deleted"),S.loadHistoryIndex(0,0)}})}),$(document).on("click","#save-route",function(e){e.preventDefault();var t=$("#addRoute"),a={};a.name=t.find("#name").val(),a.meters=t.find("#meters").val(),a.stravaId=t.find("#segmentId").val(),a.country=t.find("#countries").val(),a.gps=t.find("textarea").val(),$.ajax({type:"PUT",contentType:"application/json",dataType:"json",url:"/routes/add",data:JSON.stringify(a),success:function(){$("#add-route-modal").modal("hide")}})}),$(document).on("click","#save-user",function(e){e.preventDefault();var t=$("#addUserForm"),a=t.find("#firstName").val(),s=t.find("#lastName").val(),n=t.find("#userId").val(),o={};o.firstName=a,o.lastName=s,o.id=n,$.ajax({type:"PUT",contentType:"application/json",dataType:"json",url:"/users/add",data:JSON.stringify(o),success:function(){$("#addUserModal").modal("hide")}})}),$(document).on("click",".del-user",function(e){e.preventDefault();var t=$(this).data("id");confirm("Are you sure you want to delete?")&&$.ajax({url:"/users/"+t,type:"DELETE",success:function(e){w.loadUser()}})}),$(document).on("click",".del-route",function(e){e.preventDefault();var t=$(this).data("id");confirm("Are you sure you want to delete route?")&&$.ajax({url:"/routes/"+t,type:"DELETE",success:function(e){b.loadRoute(0)}})}),$("#load").each(function(){switch(window.location.hash){case"#route":b.loadRoute(0);break;case"#user":w.loadUser();break;case"#history":S.loadHistory(0);break;case"#session":U.loadSession(n.QueryString.name);break;default:P.loadMain()}}),$("#routes").each(b.loadRoutes),$("#session-user").each(w.loadUsers),$(document).on("show.bs.modal","#show-route-modal",b.showRouteModal),$(document).on("shown.bs.modal","#show-route-modal",function(e){var t=$(e.relatedTarget).data("route-name");c.addRouteTrackToMap(t,$("#live-route-map"))}),$(document).on("change","#routes",function(e){var t=$("#routes").find(":selected");c.cleanMap();var a=t.data("name");c.addRouteTrackToMap(a,$("#live-map"))})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL3NyYy91dGlscy91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvanMvc3JjL21hcC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvanMvc3JjL3V0aWxzL21hcFV0aWxzLmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9qcy9zcmMvdXRpbHMvZ2xvYmFscy5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvanMvc3JjL3V0aWxzL2dyYXBoVXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL3NyYy9yb3V0ZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvanMvc3JjL3VzZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vcHVibGljL2pzL3NyYy9oaXN0b3J5L2luZGV4LmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9qcy9zcmMvc2Vzc2lvbi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9wdWJsaWMvanMvc3JjL2Zyb250L2luZGV4LmpzIiwid2VicGFjazovLy8uL3B1YmxpYy9qcy9zcmMvbWFpbi5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIldBVFRfUkFUSU9OIiwidXRpbHMiLCJjYWxjV2F0dCIsInBhY2UiLCJNYXRoIiwicG93Iiwic2Vzc2lvbk5hbWVUb1JlYWRhYmxlIiwibW9tZW50Iiwic2xpY2UiLCJmb3JtYXQiLCJnZXRIZWFydFJhdGVDb2xvciIsImhyIiwiZ2V0VXJsUGFyYW1ldGVyIiwic1BhcmFtIiwic1BhcmFtZXRlck5hbWUiLCJzVVJMVmFyaWFibGVzIiwiZGVjb2RlVVJJQ29tcG9uZW50Iiwid2luZG93IiwibG9jYXRpb24iLCJzZWFyY2giLCJzdWJzdHJpbmciLCJzcGxpdCIsImxlbmd0aCIsInVuZGVmaW5lZCIsImZtdE1TUyIsImRhdGUiLCJEYXRlIiwic2V0U2Vjb25kcyIsInRvSVNPU3RyaW5nIiwic3Vic3RyIiwiUXVlcnlTdHJpbmciLCJVUkwiLCJxdWVyeV9zdHJpbmciLCJ2YXJzIiwicGFpciIsImFyciIsInB1c2giLCJtYXAiLCJsaXZlUG9pbnRzIiwibGl2ZU1hcCIsImxpdmVCb3VuZHMiLCJzdHlsZXMiLCJmZWF0dXJlVHlwZSIsInN0eWxlcnMiLCJzYXR1cmF0aW9uIiwibGlnaHRuZXNzIiwidmlzaWJpbGl0eSIsImVsZW1lbnRUeXBlIiwiaHVlIiwiaW5pdE1hcCIsIm1hcERpdiIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiem9vbSIsIm1heFpvb20iLCJMYXRMbmdCb3VuZHMiLCJzZXQiLCJjcmVhdGVQb2x5TGluZSIsInBvaW50cyIsIlBvbHlsaW5lIiwicGF0aCIsInN0cm9rZUNvbG9yIiwic3Ryb2tlT3BhY2l0eSIsInN0cm9rZVdlaWdodCIsImFkZEdweFRyYWNrVG9NYXAiLCJlbGVtZW50IiwiJCIsImFqYXgiLCJ0eXBlIiwidXJsIiwic3VjY2VzcyIsInhtbCIsImJvdW5kcyIsImZpbmQiLCJlYWNoIiwibGF0IiwidGhpcyIsImF0dHIiLCJsb24iLCJMYXRMbmciLCJleHRlbmQiLCJzZXRNYXAiLCJmaXRCb3VuZHMiLCJtYXBVdGlscyIsImNsZWFuTWFwIiwiYWRkUm91dGVUcmFja1RvTWFwIiwiZGF0YSIsImdwcyIsImZvckVhY2giLCJwb2ludCIsImxvYWRHcHhNYXAiLCJSQVRJT04iLCJQQUdFX1NJWkUiLCJnbG9iYWxzIiwiVVBEQVRFX0ZSRVEiLCJydW4iLCJncmFwaFV0aWxzIiwiYWRkR3JhcGgiLCJ0aW1lIiwic3RhcnQiLCJzdHJva2VzIiwic3BlZWQiLCJ3YXR0Iiwic3Ryb2tlIiwic3Ryb2tlQ29udGVyIiwidGltZVZhbCIsInBhcnNlSW50Iiwic3Ryb2tlVGltZSIsInNlYyIsImxlbmdodCIsIndhdHRWYWx1ZSIsInNwZWVkTWVyZ2VkIiwiaHJNZXJnZWQiLCJ3YXR0TWVyZ2VkIiwic3Ryb2tlTWVyZ2VkIiwibGFiZWxzTWVyZ2VkIiwibWVyZ2VTaXplIiwiaCIsImEiLCJzcGxpY2UiLCJ0aW1lViIsInJlZHVjZSIsImIiLCJsYXN0SW5kZXhPZiIsInJvdW5kIiwicGFyc2VGbG9hdCIsInciLCJjdHgiLCJsaW5lQ2hhcnREYXRhIiwibGFiZWxzIiwiZGF0YXNldHMiLCJsYWJlbCIsImJvcmRlckNvbG9yIiwiYmFja2dyb3VuZENvbG9yIiwiZmlsbCIsInlBeGlzSUQiLCJsaW5lVGVuc2lvbiIsIkNoYXJ0IiwiTGluZSIsIm9wdGlvbnMiLCJyZXNwb25zaXZlIiwiaG92ZXJNb2RlIiwic3RhY2tlZCIsInNjYWxlcyIsInlBeGVzIiwiZGlzcGxheSIsInBvc2l0aW9uIiwiaWQiLCJ0aWNrcyIsInN1Z2dlc3RlZE1pbiIsIm1pbiIsInN0ZXBTaXplIiwiZ3JpZExpbmVzIiwiZHJhd09uQ2hhcnRBcmVhIiwiY3JlYXRlUm91dGVSZWNvcmQiLCJodG1sVGFibGUiLCJpbmRleCIsInJvdXRlIiwibWV0ZXJzIiwiY291bnRyeSIsInBlcm1hbmVudCIsImxvYWRSb3V0ZSIsIm1haW5JbmRleCIsImxvYWQiLCJsb2FkUm91dGVUYWJsZSIsImNyZWF0ZVJvdXRlTmF2UGFnZSIsInBhZ2UiLCJodG1sRWxlbWVudCIsImFkZENsYXNzIiwic2l6ZSIsIm5leHREaXNhYmxlZCIsInByZXYiLCJhcHBlbmQiLCJuZXh0IiwiYWN0aXZlIiwiaXRlbSIsImh0bWwiLCJzdG9wIiwib24iLCJlIiwic3JjX3JvdXRlIiwibG9hZFJvdXRlcyIsInRoYXQiLCJncm91cCIsInNvcnQiLCJzZWxlY3RlZCIsImVkaXRSb3V0ZSIsInByZXZlbnREZWZhdWx0IiwicmVzdWx0IiwiZm9ybSIsInZhbCIsInNlZ21lbnRJZCIsImdwc0N2cyIsIkpTT04iLCJzdHJpbmdpZnkiLCJtb2RhbCIsInNob3dSb3V0ZU1vZGFsIiwicmVsYXRlZFRhcmdldCIsInRpdGxlIiwic2VnZW1lbnRJZCIsImdwc0xlbmdodCIsInNyY191c2VyIiwibG9hZFVzZXJzIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJsb2FkVXNlciIsInVzZXIiLCJlZGl0VXNlciIsInJlcGxhY2UiLCJyZW1vdmVDbGFzcyIsImxvYWRIaXN0b3J5IiwiaHRtbENhcmRzIiwic2Vzc2lvbiIsImNyZWF0ZUNhcmQiLCJ0cmlnZ2VyIiwibG9hZEhpc3RvcnlMaXN0IiwidXNlcnMiLCJ1c2VyTWFwIiwib2JqIiwiY3JlYXRlTGFwVGFibGVSZWNvcmQiLCJwcmV2RGlzYWJsZWQiLCJjcmVhdGVIaXN0b3J5TmF2UGFnZSIsImVuZFN0YXRzIiwic2Vjb25kcyIsInNyY19oaXN0b3J5IiwibG9hZEhpc3RvcnlJbmRleCIsIm9wZW5IaXN0b3J5IiwiaXNOYU4iLCJsb2FkU2Vzc2lvbiIsImZyb250IiwiZ2V0SHRtbCIsImdldExhcEh0bWwiLCJyYXciLCJyYXdIciIsImpzb24iLCJyZXZlcnNlIiwidG90YWxMYXBzIiwibGFwTnVtIiwibGFwcyIsInRpbWVPdXQiLCJzcmNfc2Vzc2lvbiIsImNsaWNrU2Vzc2lvbiIsImZyb250X3N0YXJ0Iiwic3RhcnRCdXR0b24iLCJzY3JvbGxUb3AiLCJvZmZzZXQiLCJ0b3AiLCJnZXRfcm93SW5mbyIsImNvbnRpbnVlcyIsImRvbmUiLCJzZXRUaW1lb3V0IiwiZGF5Iiwicm91dGVMYXAiLCJsYXBQYWNlIiwidG93S1BhY2UiLCJhdmdIciIsImZpbGVOYW1lIiwibG9hZE1haW4iLCJzdGF0dXMiLCJzdGFydFJvdyIsInJvdXRlcyIsInN0b3BSb3ciLCJjbGVhclRpbWVvdXQiLCJyZW1vdmVBdHRyIiwicGFnIiwicGFyZW50IiwiaHJlZiIsImNvbnNvbGUiLCJsb2ciLCJhbGVydCIsImNvbmZpcm0iLCJldmVudCIsInN0cmF2YUlkIiwiY29udGVudFR5cGUiLCJkYXRhVHlwZSIsImhhc2giXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEs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QUFBOEYsRUFBQSxzQkFHaEJBLEVBQUFsQixVQUFBa0ksR0FBQSw0QkFBQUMsR0FDQSxJQUFBTSxFQUFBdkgsRUFBQSxXQUFBTyxLQUFBLGFBQ1FVLEVBQVFDLFdBQ2hCLElBQUFoSCxFQUFBcU4sRUFBQW5HLEtBQUEsUUFDUUgsRUFBUUUsbUJBQUFqSCxFQUFBOEYsRUFBQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJjb25zdCBXQVRUX1JBVElPTiA9IDIuODA7XHJcblxyXG5mdW5jdGlvbiBjYWxjV2F0dChwYWNlKSB7XHJcbiAgICByZXR1cm4gV0FUVF9SQVRJT04gLyBNYXRoLnBvdyhwYWNlLCAzKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2Vzc2lvbk5hbWVUb1JlYWRhYmxlKG5hbWUpIHtcclxuICAgIHJldHVybiBtb21lbnQobmFtZS5zbGljZSgwLCAxMykgKyAnOicgKyBuYW1lLnNsaWNlKDEzLDE1KSArICc6JyArIG5hbWUuc2xpY2UoMTUpKS5mb3JtYXQoXCJZWVlZLU1NLUREIGhoOm1tOnNzXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRIZWFydFJhdGVDb2xvcihocikge1xyXG4gICAgaWYgKGhyIDwgMTI1KSB7XHJcbiAgICAgICAgcmV0dXJuICd0ZXh0LXN1Y2Nlc3MnXHJcbiAgICB9IGVsc2UgaWYgKGhyIDwgMTUwKSB7XHJcbiAgICAgICAgcmV0dXJuICd0ZXh0LXByaW1hcnknXHJcbiAgICB9IGVsc2UgaWYgKGhyIDwgMTc1KSB7XHJcbiAgICAgICAgcmV0dXJuICd0ZXh0LXdhcm5pbmcnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJ3RleHQtZGFuZ2VyJztcclxuICAgIH1cclxufVxyXG5cclxudmFyIGdldFVybFBhcmFtZXRlciA9IGZ1bmN0aW9uIGdldFVybFBhcmFtZXRlcihzUGFyYW0pIHtcclxuICAgIHZhciBzUGFnZVVSTCA9IGRlY29kZVVSSUNvbXBvbmVudCh3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKSksXHJcbiAgICAgICAgc1VSTFZhcmlhYmxlcyA9IHNQYWdlVVJMLnNwbGl0KCcmJyksXHJcbiAgICAgICAgc1BhcmFtZXRlck5hbWUsXHJcbiAgICAgICAgaTtcclxuXHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgc1VSTFZhcmlhYmxlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHNQYXJhbWV0ZXJOYW1lID0gc1VSTFZhcmlhYmxlc1tpXS5zcGxpdCgnPScpO1xyXG5cclxuICAgICAgICBpZiAoc1BhcmFtZXRlck5hbWVbMF0gPT09IHNQYXJhbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gc1BhcmFtZXRlck5hbWVbMV0gPT09IHVuZGVmaW5lZCA/IHRydWUgOiBzUGFyYW1ldGVyTmFtZVsxXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBmbXRNU1Mocykge1xyXG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShudWxsKTtcclxuICAgIGRhdGUuc2V0U2Vjb25kcyhzKTsgLy8gc3BlY2lmeSB2YWx1ZSBmb3IgU0VDT05EUyBoZXJlXHJcbiAgICByZXR1cm4gZGF0ZS50b0lTT1N0cmluZygpLnN1YnN0cigxMSwgOCk7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogVGhpcyBmdW5jdGlvbiByZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGV2ZXJ5IGdldCBwYXJhbWV0ZXIgZnJvbSBhIFVSTCAoZmlyc3QgYXJndW1lbnQpIGFzIGEgcHJvcGVydHlcclxuICogXHJcbiAqIEBwYXJhbSBVUkwge1N0cmluZ31cclxuICovXHJcbmZ1bmN0aW9uIFF1ZXJ5U3RyaW5nKFVSTCkge1xyXG4gICAgLy8gVGhpcyBmdW5jdGlvbiBpcyBhbm9ueW1vdXMsIGlzIGV4ZWN1dGVkIGltbWVkaWF0ZWx5IGFuZCBcclxuICAgIC8vIHRoZSByZXR1cm4gdmFsdWUgaXMgYXNzaWduZWQgdG8gUXVlcnlTdHJpbmchXHJcbiAgICB2YXIgcXVlcnlfc3RyaW5nID0ge307XHJcbiAgICB2YXIgdXNlZnVsUGFyYW0gPSBVUkwuc3BsaXQoXCI/XCIpWzFdIHx8IFwiXCI7XHJcbiAgICB2YXIgcXVlcnkgPSB1c2VmdWxQYXJhbSB8fCBcIlwiO1xyXG4gICAgdmFyIHZhcnMgPSBxdWVyeS5zcGxpdChcIiZcIik7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHBhaXIgPSB2YXJzW2ldLnNwbGl0KFwiPVwiKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBJZiBmaXJzdCBlbnRyeSB3aXRoIHRoaXMgbmFtZVxyXG4gICAgICAgIGlmICh0eXBlb2YgcXVlcnlfc3RyaW5nW3BhaXJbMF1dID09PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5X3N0cmluZ1twYWlyWzBdXSA9IGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKTtcclxuICAgICAgICAgICAgLy8gSWYgc2Vjb25kIGVudHJ5IHdpdGggdGhpcyBuYW1lXHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcXVlcnlfc3RyaW5nW3BhaXJbMF1dID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIHZhciBhcnIgPSBbcXVlcnlfc3RyaW5nW3BhaXJbMF1dLCBkZWNvZGVVUklDb21wb25lbnQocGFpclsxXSldO1xyXG4gICAgICAgICAgICBxdWVyeV9zdHJpbmdbcGFpclswXV0gPSBhcnI7XHJcbiAgICAgICAgICAgIC8vIElmIHRoaXJkIG9yIGxhdGVyIGVudHJ5IHdpdGggdGhpcyBuYW1lXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcXVlcnlfc3RyaW5nW3BhaXJbMF1dLnB1c2goZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHF1ZXJ5X3N0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgeyBjYWxjV2F0dCwgc2Vzc2lvbk5hbWVUb1JlYWRhYmxlLCBnZXRIZWFydFJhdGVDb2xvciwgZ2V0VXJsUGFyYW1ldGVyLCBmbXRNU1MsIFxyXG4gICAgUXVlcnlTdHJpbmcgfVxyXG5cclxuIiwidmFyIGxpdmVQb2ludHMgPSBbXTtcclxudmFyIGxpdmVNYXA7XHJcbnZhciBsaXZlQm91bmRzO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHsgbGl2ZVBvaW50cywgbGl2ZU1hcCwgbGl2ZUJvdW5kcyB9IiwiaW1wb3J0IG1hcCBmcm9tICcuLi9tYXAvaW5kZXgnXHJcblxyXG5jb25zdCBzdHlsZXMgPSBbe1xyXG4gICAgXCJmZWF0dXJlVHlwZVwiOiBcImxhbmRzY2FwZVwiLCBcInN0eWxlcnNcIjogW3sgXCJzYXR1cmF0aW9uXCI6IC0xMDAgfSwgeyBcImxpZ2h0bmVzc1wiOiA2NSB9LFxyXG4gICAgICAgIHsgXCJ2aXNpYmlsaXR5XCI6IFwib25cIiB9XVxyXG59LCB7XHJcbiAgICBcImZlYXR1cmVUeXBlXCI6IFwicG9pXCIsIFwic3R5bGVyc1wiOiBbeyBcInNhdHVyYXRpb25cIjogLTEwMCB9LCB7IFwibGlnaHRuZXNzXCI6IDUxIH0sXHJcbiAgICAgICAgeyBcInZpc2liaWxpdHlcIjogXCJzaW1wbGlmaWVkXCIgfV1cclxufSwge1xyXG4gICAgXCJmZWF0dXJlVHlwZVwiOiBcInJvYWQuaGlnaHdheVwiLCBcInN0eWxlcnNcIjogW3sgXCJzYXR1cmF0aW9uXCI6IC0xMDAgfSxcclxuICAgICAgICB7IFwidmlzaWJpbGl0eVwiOiBcInNpbXBsaWZpZWRcIiB9XVxyXG59LCB7XHJcbiAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZC5hcnRlcmlhbFwiLCBcInN0eWxlcnNcIjogW3sgXCJzYXR1cmF0aW9uXCI6IC0xMDAgfSxcclxuICAgICAgICB7IFwibGlnaHRuZXNzXCI6IDMwIH0sIHsgXCJ2aXNpYmlsaXR5XCI6IFwib25cIiB9XVxyXG59LCB7XHJcbiAgICBcImZlYXR1cmVUeXBlXCI6IFwicm9hZC5sb2NhbFwiLCBcInN0eWxlcnNcIjogW3sgXCJzYXR1cmF0aW9uXCI6IC0xMDAgfSxcclxuICAgICAgICB7IFwibGlnaHRuZXNzXCI6IDQwIH0sIHsgXCJ2aXNpYmlsaXR5XCI6IFwib25cIiB9XVxyXG59LCB7XHJcbiAgICBcImZlYXR1cmVUeXBlXCI6IFwidHJhbnNpdFwiLCBcInN0eWxlcnNcIjogW3sgXCJzYXR1cmF0aW9uXCI6IC0xMDAgfSxcclxuICAgICAgICB7IFwidmlzaWJpbGl0eVwiOiBcInNpbXBsaWZpZWRcIiB9XVxyXG59LCB7IFwiZmVhdHVyZVR5cGVcIjogXCJhZG1pbmlzdHJhdGl2ZS5wcm92aW5jZVwiLCBcInN0eWxlcnNcIjogW3sgXCJ2aXNpYmlsaXR5XCI6IFwib2ZmXCIgfV0gfSxcclxuICAgIHsgXCJmZWF0dXJlVHlwZVwiOiBcIndhdGVyXCIsIFwiZWxlbWVudFR5cGVcIjogXCJsYWJlbHNcIiwgXCJzdHlsZXJzXCI6IFt7IFwidmlzaWJpbGl0eVwiOiBcIm9uXCIgfSwgeyBcImxpZ2h0bmVzc1wiOiAtMjUgfSwgeyBcInNhdHVyYXRpb25cIjogLTEwMCB9XSB9LFxyXG4gICAgeyBcImZlYXR1cmVUeXBlXCI6IFwid2F0ZXJcIiwgXCJlbGVtZW50VHlwZVwiOiBcImdlb21ldHJ5XCIsIFwic3R5bGVyc1wiOiBbeyBcImh1ZVwiOiBcIiNmZmZmMDBcIiB9LCB7IFwibGlnaHRuZXNzXCI6IC0yNSB9LCB7IFwic2F0dXJhdGlvblwiOiAtOTcgfV0gfV07XHJcblxyXG5mdW5jdGlvbiBjbGVhbk1hcCgpIHtcclxuICAgIGluaXRNYXAoKTtcclxuICAgIG1hcC5saXZlUG9pbnRzID0gW107XHJcbiAgICB2YXIgcG9seSA9IGNyZWF0ZVBvbHlMaW5lKG1hcC5saXZlUG9pbnRzKTtcclxuICAgIHBvbHkuc2V0TWFwKG1hcC5saXZlTWFwKTtcclxuXHJcbiAgICAvLyBmaXQgYm91bmRzIHRvIHRyYWNrXHJcbiAgICBpZiAodHlwZW9mIG1hcC5saXZlTWFwLmZpdEJvdW5kcyA9PT0gJ2Z1bmN0aW9uJyApIHtcclxuICAgICAgICBtYXAubGl2ZU1hcC5maXRCb3VuZHMobWFwLmxpdmVCb3VuZHMpO1xyXG4gICAgfVxyXG4gICBcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdE1hcCgpIHtcclxuICAgIHZhciBtYXBEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGl2ZS1tYXAnKTtcclxuICAgIGlmIChtYXBEaXYpIHtcclxuICAgICAgICBtYXAubGl2ZU1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAobWFwRGl2LCB7XHJcbiAgICAgICAgICAgIHpvb206IDgsXHJcbiAgICAgICAgICAgIG1heFpvb206IDE2XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbWFwLmxpdmVCb3VuZHMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKCk7XHJcbiAgICAgICAgbWFwLmxpdmVNYXAuc2V0KCdzdHlsZXMnLCBzdHlsZXMpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vL1RPRE86IENoYW5nZSBjb2xvciBieSBzcGVlZCBvciBoci5cclxuZnVuY3Rpb24gY3JlYXRlUG9seUxpbmUocG9pbnRzKSB7XHJcbiAgICByZXR1cm4gbmV3IGdvb2dsZS5tYXBzLlBvbHlsaW5lKHtcclxuICAgICAgICBwYXRoOiBwb2ludHMsXHJcbiAgICAgICAgc3Ryb2tlQ29sb3I6IFwiI0ZGMDBBQVwiLFxyXG4gICAgICAgIHN0cm9rZU9wYWNpdHk6IC43LFxyXG4gICAgICAgIHN0cm9rZVdlaWdodDogNFxyXG4gICAgfSk7XHJcbn1cclxuXHJcbnZhciBhZGRSb3V0ZVRyYWNrVG9NYXAgPSBmdW5jdGlvbiAobmFtZSwgZWxlbWVudCkge1xyXG4gICAgaWYgKG5hbWUpIHtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICB1cmw6ICcvcm91dGVzLycgKyBuYW1lLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvaW50cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZWxlbWVudFswXSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHpvb206IDgsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4Wm9vbTogMTZcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG1hcC5zZXQoJ3N0eWxlcycsIHN0eWxlcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkYXRhLmdwcy5mb3JFYWNoKGZ1bmN0aW9uIChwb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsYXQgPSBwb2ludC5sYXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvbiA9IHBvaW50LmxvbjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobGF0LCBsb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50cy5wdXNoKHApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvdW5kcy5leHRlbmQocCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcG9seSA9IGNyZWF0ZVBvbHlMaW5lKHBvaW50cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgcG9seS5zZXRNYXAobWFwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBmaXQgYm91bmRzIHRvIHRyYWNrXHJcbiAgICAgICAgICAgICAgICBtYXAuZml0Qm91bmRzKGJvdW5kcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxuXHJcbnZhciBhZGRHcHhUcmFja1RvTWFwID0gZnVuY3Rpb24gKG5hbWUsIGVsZW1lbnQpIHtcclxuICAgIGlmIChuYW1lKSB7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgdXJsOiAnL3Nlc3Npb25zLycgKyBuYW1lICsgJy5ncHgnLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoeG1sKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcG9pbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChlbGVtZW50WzBdLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgem9vbTogMTZcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIG1hcC5zZXQoJ3N0eWxlcycsIHN0eWxlcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGJvdW5kcyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKHhtbCkuZmluZChcInRya3B0XCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsYXQgPSAkKHRoaXMpLmF0dHIoXCJsYXRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvbiA9ICQodGhpcykuYXR0cihcImxvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobGF0LCBsb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50cy5wdXNoKHApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvdW5kcy5leHRlbmQocCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcG9seSA9IGNyZWF0ZVBvbHlMaW5lKHBvaW50cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgcG9seS5zZXRNYXAobWFwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBmaXQgYm91bmRzIHRvIHRyYWNrXHJcbiAgICAgICAgICAgICAgICBtYXAuZml0Qm91bmRzKGJvdW5kcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIGxvYWRHcHhNYXAoKSB7XHJcbiAgICB2YXIgbmFtZSA9ICQodGhpcykuZGF0YSgnbmFtZScpO1xyXG4gICAgdmFyIGVsZW1lbnQgPSAkKHRoaXMpLmZpbmQoJy5jYXJkLW1hcC10b3AnKTtcclxuICAgIGFkZEdweFRyYWNrVG9NYXAobmFtZSwgZWxlbWVudCk7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCB7IGNsZWFuTWFwLCBpbml0TWFwLCBzdHlsZXMsIGFkZFJvdXRlVHJhY2tUb01hcCwgYWRkR3B4VHJhY2tUb01hcCwgbG9hZEdweE1hcCxcclxuICAgIGNyZWF0ZVBvbHlMaW5lIH0iLCJleHBvcnQgY29uc3QgUkFUSU9OID0gKDEwMCAvIDQuODA1KSAqIDY7XHJcbmV4cG9ydCBjb25zdCBQQUdFX1NJWkUgPSAxMDtcclxuZXhwb3J0IGNvbnN0IFVQREFURV9GUkVRID0gMTAwMDtcclxuZXhwb3J0IHZhciBydW4gPSBmYWxzZTtcclxuXHJcblxyXG5leHBvcnQgZGVmYXVsdCB7IFJBVElPTiwgUEFHRV9TSVpFLCBVUERBVEVfRlJFUSwgcnVuIH0iLCJpbXBvcnQgeyBVUERBVEVfRlJFUSwgUEFHRV9TSVpFLCBSQVRJT04sIHJ1biB9IGZyb20gJy4uL3V0aWxzL2dsb2JhbHMnO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMvdXRpbHMnO1xyXG5cclxuZnVuY3Rpb24gYWRkR3JhcGgodGltZSwgaHIsIHN0YXJ0LCBzdHJva2VzKSB7XHJcbiAgICB2YXIgc3BlZWQgPSBbXTtcclxuICAgIHZhciB3YXR0ID0gW107XHJcbiAgICB2YXIgc3Ryb2tlID0gW107XHJcbiAgICB2YXIgc3Ryb2tlQ29udGVyID0gMTtcclxuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgdGltZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciB0aW1lVmFsID0gcGFyc2VJbnQodGltZVtpXSk7XHJcbiAgICAgICAgdmFyIHN0cm9rZVRpbWUgPSBwYXJzZUludChzdHJva2VzW3N0cm9rZUNvbnRlcl0pO1xyXG4gICAgICAgIHZhciBzZWMgPSAoKHRpbWVWYWwgLSBzdGFydCkgLyAxMDAwKTtcclxuICAgICAgICB2YXIgbGVuZ2h0ID0gKFJBVElPTiAvIDEwMCk7XHJcbiAgICAgICAgc3BlZWQucHVzaCgoKGxlbmdodCAvIHNlYykpICogMy42KTtcclxuICAgICAgICB2YXIgd2F0dFZhbHVlID0gdXRpbHMuY2FsY1dhdHQoc2VjIC8gbGVuZ2h0KTtcclxuICAgICAgICB3YXR0LnB1c2god2F0dFZhbHVlKTtcclxuICAgICAgICBzdHJva2UucHVzaCgxMDAwKjYwIC8gKHN0cm9rZVRpbWUgLSBwYXJzZUludChzdHJva2VzW3N0cm9rZUNvbnRlci0xXSkpKTtcclxuICAgICAgICBzdGFydCA9IHBhcnNlSW50KHRpbWVbaV0pO1xyXG4gICAgICAgIGlmICh0aW1lVmFsID4gc3Ryb2tlVGltZSkge1xyXG4gICAgICAgICAgICBzdHJva2VDb250ZXIrKztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy9SZW1vdmUgZXZlciBzZWNvbmQgZWxlbWVudFxyXG4gICAgdmFyIHNwZWVkTWVyZ2VkID0gW107XHJcbiAgICB2YXIgaHJNZXJnZWQgPSBbXTtcclxuICAgIHZhciB3YXR0TWVyZ2VkID0gW107XHJcbiAgICB2YXIgc3Ryb2tlTWVyZ2VkID0gW107XHJcbiAgICB2YXIgbGFiZWxzTWVyZ2VkID0gW107XHJcbiAgICB2YXIgbWVyZ2VTaXplID0gMTA7XHJcbiAgICBpZiAodGltZS5sZW5ndGggPiAxMDAwKSB7XHJcbiAgICAgICAgbWVyZ2VTaXplID0gMjA7XHJcbiAgICB9XHJcblxyXG4gICAgd2hpbGUgKHRpbWUubGVuZ3RoKSB7XHJcbiAgICAgICAgdmFyIGEgPSB0aW1lLnNwbGljZSgwLCBtZXJnZVNpemUpO1xyXG4gICAgICAgIHZhciB0aW1lViA9IHBhcnNlSW50KGEucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhICsgYjsgfSkgLyBhLmxlbmd0aCk7XHJcbiAgICAgICAgbGFiZWxzTWVyZ2VkLnB1c2gobmV3IERhdGUodGltZVYpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKG5ldyBEYXRlKHRpbWVWKS50b0lTT1N0cmluZygpLmxhc3RJbmRleE9mKCdUJykgKyAxLCA4KSk7XHJcbiAgICAgICAgaWYgKGhyKSB7XHJcbiAgICAgICAgICAgIHZhciBoID0gaHIuc3BsaWNlKDAsIG1lcmdlU2l6ZSk7XHJcbiAgICAgICAgICAgIGlmIChoLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGhyTWVyZ2VkLnB1c2gocGFyc2VJbnQoaC5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEgKyBiOyB9KSAvIGgubGVuZ3RoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHN0cm9rZSkge1xyXG4gICAgICAgICAgICB2YXIgaCA9IHN0cm9rZS5zcGxpY2UoMCwgbWVyZ2VTaXplKTtcclxuICAgICAgICAgICAgaWYgKGgubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgc3Ryb2tlTWVyZ2VkLnB1c2goTWF0aC5yb3VuZChwYXJzZUZsb2F0KGgucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhICsgYjsgfSkgLyBoLmxlbmd0aCkgKiAxMCkgLyAxMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNwZWVkKSB7XHJcbiAgICAgICAgICAgIHZhciBzID0gc3BlZWQuc3BsaWNlKDAsIG1lcmdlU2l6ZSk7XHJcbiAgICAgICAgICAgIHZhciB3ID0gd2F0dC5zcGxpY2UoMCwgbWVyZ2VTaXplKTtcclxuICAgICAgICAgICAgaWYgKHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgc3BlZWRNZXJnZWQucHVzaChNYXRoLnJvdW5kKHBhcnNlRmxvYXQocy5yZWR1Y2UoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIGEgKyBiOyB9KSAvIHMubGVuZ3RoKSAqIDEwKSAvIDEwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAody5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB3YXR0TWVyZ2VkLnB1c2goTWF0aC5yb3VuZChwYXJzZUZsb2F0KHcucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhICsgYjsgfSkgLyB3Lmxlbmd0aCkgKiAxMCkgLyAxMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGN0eCA9ICQoJyNoci1ncmFwaCcpO1xyXG4gICAgdmFyIGxpbmVDaGFydERhdGEgPSB7XHJcbiAgICAgICAgbGFiZWxzOiBsYWJlbHNNZXJnZWQsXHJcbiAgICAgICAgZGF0YXNldHM6IFt7XHJcbiAgICAgICAgICAgIGxhYmVsOiAnSGVhcnQgcmF0ZSAoYnBtKScsXHJcbiAgICAgICAgICAgIGJvcmRlckNvbG9yOiAnI2RjMzU0NScsXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNkYzM1NDUnLFxyXG4gICAgICAgICAgICBmaWxsOiBmYWxzZSxcclxuICAgICAgICAgICAgZGF0YTogaHJNZXJnZWQsXHJcbiAgICAgICAgICAgIC8vIGN1YmljSW50ZXJwb2xhdGlvbk1vZGU6ICdtb25vdG9uZScsXHJcbiAgICAgICAgICAgIHlBeGlzSUQ6ICd5LWF4aXMtMScsXHJcbiAgICAgICAgfSwge1xyXG4gICAgICAgICAgICBsYWJlbDogJ1NwZWVkIChrbS90KScsXHJcbiAgICAgICAgICAgIGJvcmRlckNvbG9yOiAnIzAwN2JmZicsXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyMwMDdiZmYnLFxyXG4gICAgICAgICAgICBmaWxsOiBmYWxzZSxcclxuICAgICAgICAgICAgZGF0YTogc3BlZWRNZXJnZWQsXHJcbiAgICAgICAgICAgIC8vY3ViaWNJbnRlcnBvbGF0aW9uTW9kZTogJ21vbm90b25lJyxcclxuICAgICAgICAgICAgeUF4aXNJRDogJ3ktYXhpcy0yJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxhYmVsOiAnV2F0dCcsXHJcbiAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogJyM0YmMwYzAnLFxyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzRiYzBjMCcsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHdhdHRNZXJnZWQsXHJcbiAgICAgICAgICAgICAgICBsaW5lVGVuc2lvbjogMCxcclxuICAgICAgICAgICAgICAgIC8vY3ViaWNJbnRlcnBvbGF0aW9uTW9kZTogJ21vbm90b25lJyxcclxuICAgICAgICAgICAgICAgIHlBeGlzSUQ6ICd5LWF4aXMtMydcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6ICdTdHJva2UgcmF0ZSAoc3BtKScsXHJcbiAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogJyM5OTY2RkYnLFxyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzk5NjZGRicsXHJcbiAgICAgICAgICAgICAgICBmaWxsOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHN0cm9rZU1lcmdlZCxcclxuICAgICAgICAgICAgICAgIHlBeGlzSUQ6ICd5LWF4aXMtNCdcclxuICAgICAgICAgICAgfV1cclxuICAgIH07XHJcbiAgICB2YXIgbXlMaW5lQ2hhcnQgPSBDaGFydC5MaW5lKGN0eCwge1xyXG4gICAgICAgIGRhdGE6IGxpbmVDaGFydERhdGEsXHJcbiAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICByZXNwb25zaXZlOiB0cnVlLFxyXG4gICAgICAgICAgICBob3Zlck1vZGU6ICdpbmRleCcsXHJcbiAgICAgICAgICAgIHN0YWNrZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBzY2FsZXM6IHtcclxuICAgICAgICAgICAgICAgIHlBeGVzOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdsaW5lYXInLCAvLyBvbmx5IGxpbmVhciBidXQgYWxsb3cgc2NhbGUgdHlwZSByZWdpc3RyYXRpb24uIFRoaXMgYWxsb3dzIGV4dGVuc2lvbnMgdG8gZXhpc3Qgc29sZWx5IGZvciBsb2cgc2NhbGUgZm9yIGluc3RhbmNlXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2xlZnQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGlkOiAneS1heGlzLTEnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpY2tzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Z2dlc3RlZE1pbjogMzAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RlcFNpemU6IDVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2xpbmVhcicsIC8vIG9ubHkgbGluZWFyIGJ1dCBhbGxvdyBzY2FsZSB0eXBlIHJlZ2lzdHJhdGlvbi4gVGhpcyBhbGxvd3MgZXh0ZW5zaW9ucyB0byBleGlzdCBzb2xlbHkgZm9yIGxvZyBzY2FsZSBmb3IgaW5zdGFuY2VcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAncmlnaHQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGlkOiAneS1heGlzLTInLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpY2tzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXBTaXplOiAyXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAvLyBncmlkIGxpbmUgc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgICAgICBncmlkTGluZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJhd09uQ2hhcnRBcmVhOiBmYWxzZSAvLyBvbmx5IHdhbnQgdGhlIGdyaWQgbGluZXMgZm9yIG9uZSBheGlzIHRvIHNob3cgdXBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2xpbmVhcicsIC8vIG9ubHkgbGluZWFyIGJ1dCBhbGxvdyBzY2FsZSB0eXBlIHJlZ2lzdHJhdGlvbi4gVGhpcyBhbGxvd3MgZXh0ZW5zaW9ucyB0byBleGlzdCBzb2xlbHkgZm9yIGxvZyBzY2FsZSBmb3IgaW5zdGFuY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdyaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAneS1heGlzLTMnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWNrczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcFNpemU6IDI1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGdyaWQgbGluZSBzZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBncmlkTGluZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYXdPbkNoYXJ0QXJlYTogZmFsc2UgLy8gb25seSB3YW50IHRoZSBncmlkIGxpbmVzIGZvciBvbmUgYXhpcyB0byBzaG93IHVwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2xpbmVhcicsIC8vIG9ubHkgbGluZWFyIGJ1dCBhbGxvdyBzY2FsZSB0eXBlIHJlZ2lzdHJhdGlvbi4gVGhpcyBhbGxvd3MgZXh0ZW5zaW9ucyB0byBleGlzdCBzb2xlbHkgZm9yIGxvZyBzY2FsZSBmb3IgaW5zdGFuY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdyaWdodCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAneS1heGlzLTQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWNrczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcFNpemU6IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWdnZXN0ZWRNaW46IDEwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBncmlkIGxpbmUgc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZExpbmVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmF3T25DaGFydEFyZWE6IGZhbHNlIC8vIG9ubHkgd2FudCB0aGUgZ3JpZCBsaW5lcyBmb3Igb25lIGF4aXMgdG8gc2hvdyB1cFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7IGFkZEdyYXBoIH1cclxuIiwiaW1wb3J0IG1hcFV0aWxzIGZyb20gJy4uL3V0aWxzL21hcFV0aWxzJ1xyXG5pbXBvcnQgbWFwIGZyb20gJy4uL21hcC9pbmRleCdcclxuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzL3V0aWxzJztcclxuaW1wb3J0IGdyYXBoVXRpbHMgZnJvbSAnLi4vdXRpbHMvZ3JhcGhVdGlscyc7XHJcbmltcG9ydCB7IFVQREFURV9GUkVRLCBQQUdFX1NJWkUsIFJBVElPTiwgcnVuIH0gZnJvbSAnLi4vdXRpbHMvZ2xvYmFscyc7XHJcblxyXG4vKiogQWxsIGxvYWQgZnVuY3Rpb25zICovXHJcbnZhciBsb2FkUm91dGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgJC5nZXQoXCIvcm93L3JvdXRlc1wiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHZhciBodG1sID0gJyc7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gMDtcclxuICAgICAgICB2YXIgZ3JvdXAgPSAnJztcclxuICAgICAgICBkYXRhLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIChhLmNvdW50cnkgPiBiLmNvdW50cnkpID8gMSA6ICgoYi5jb3VudHJ5ID4gYS5jb3VudHJ5KSA/IC0xIDogMCk7IH0pO1xyXG5cclxuICAgICAgICB2YXIgc2VsZWN0ZWQgPSAnc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiJztcclxuICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZS5jb3VudHJ5ICE9PSBncm91cCkge1xyXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPG9wdGdyb3VwIGxhYmVsPVwiJyArIHZhbHVlLmNvdW50cnkgKyAnXCI+JztcclxuICAgICAgICAgICAgICAgIGdyb3VwID0gdmFsdWUuY291bnRyeTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBodG1sICs9ICc8b3B0aW9uICcgKyBzZWxlY3RlZCArICcgdmFsdWU9XCInICsgdmFsdWUuaW5kZXggKyAnXCIgZGF0YS1uYW1lPVwiJyArIHZhbHVlLm5hbWUgKyAnXCIgZGF0YS1sYXQ9XCInICsgdmFsdWUuZ3BzWzBdLmxhdCArICdcIiBkYXRhLWxvbj1cIicgKyB2YWx1ZS5ncHNbMF0ubG9uICsgJ1wiPicgKyB2YWx1ZS5uYW1lICsgJyAoJyArIHZhbHVlLm1ldGVycyArICdtKTwvb3B0aW9uPic7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkID0gJyc7XHJcbiAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCh0aGF0KS5odG1sKGh0bWwpO1xyXG4gICAgICAgIHZhciBzZWxlY3RlZCA9ICQoJyNyb3V0ZXMnKS5maW5kKFwiOnNlbGVjdGVkXCIpO1xyXG4gICAgICAgIG1hcFV0aWxzLmNsZWFuTWFwKCk7XHJcbiAgICAgICAgdmFyIG5hbWUgPSBzZWxlY3RlZC5kYXRhKCduYW1lJyk7XHJcbiAgICAgICAgbWFwVXRpbHMuYWRkUm91dGVUcmFja1RvTWFwKG5hbWUsICQoXCIjbGl2ZS1tYXBcIikpO1xyXG4gICAgfSk7XHJcblxyXG59O1xyXG5cclxudmFyIGNyZWF0ZVJvdXRlUmVjb3JkID0gZnVuY3Rpb24gKGh0bWxUYWJsZSwgaW5kZXgsIHJvdXRlKSB7XHJcbiAgICBodG1sVGFibGUgKz0gJzx0cj4nO1xyXG4gICAgaHRtbFRhYmxlICs9ICc8dGggc2NvcGU9XCJyb3dcIj4nICsgKGluZGV4ICsgMSkgKyAnPC90aD4nO1xyXG4gICAgaHRtbFRhYmxlICs9ICc8dGQ+PGEgZGF0YS10b2dnbGU9XCJtb2RhbFwiIGRhdGEtcm91dGUtbmFtZT1cIicgKyByb3V0ZS5uYW1lICsgJ1wiIGRhdGEtdGFyZ2V0PVwiI3Nob3ctcm91dGUtbW9kYWxcIiBocmVmPVwiL3JvdXRlcy8nICsgcm91dGUubmFtZSArICdcIj4nICsgcm91dGUubmFtZSArICc8L2E+PC90ZD4nO1xyXG4gICAgaHRtbFRhYmxlICs9ICc8dGQ+JyArIHBhcnNlSW50KHJvdXRlLm1ldGVycykgKyAnbTwvdGQ+JztcclxuICAgIGh0bWxUYWJsZSArPSAnPHRkPicgKyByb3V0ZS5jb3VudHJ5ICsgJzwvdGQ+JztcclxuICAgIGh0bWxUYWJsZSArPSAnPHRkPidcclxuICAgIGlmIChyb3V0ZS5wZXJtYW5lbnQgIT09IHRydWUpIHtcclxuICAgICAgICBodG1sVGFibGUgKz0gJzxhIGNsYXNzPVwiZWRpdC1yb3V0ZVwiIGhyZWY9XCIjXCIgZGF0YS1pZD1cIicgKyByb3V0ZS5uYW1lICsgJ1wiPjxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5jcmVhdGU8L2k+PC9hPjxhIGNsYXNzPVwiZGVsLXJvdXRlXCIgaHJlZj1cIiNcIiBkYXRhLWlkPVwiJyArIHJvdXRlLm5hbWUgKyAnXCI+PGkgYXJpYS1oaWRkZW49XCJ0cnVlXCIgdGl0bGU9XCJEZWxldGUgcm91dGVcIiBjbGFzcz1cIm1hdGVyaWFsLWljb25zXCI+ZGVsZXRlPC9pPjwvYT4nICsgJzwvdGQ+JztcclxuICAgIH1cclxuICAgIGh0bWxUYWJsZSArPSAnPC90cj4nO1xyXG4gICAgcmV0dXJuIGh0bWxUYWJsZTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGxvYWRSb3V0ZShtYWluSW5kZXgpIHtcclxuICAgICQoJyNsb2FkJykubG9hZCgnL3JvdXRlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuZmluZCgnI3JvdXRlcy10JykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxvYWRSb3V0ZVRhYmxlKDApO1xyXG4gICAgICAgICAgICB2YXIgcGFnID0gJCgnI3JvdXRlcy10YWJsZScpLmZpbmQoJy5wYWdlJyk7XHJcbiAgICAgICAgICAgIGNyZWF0ZVJvdXRlTmF2UGFnZShwYWdbMF0sIG1haW5JbmRleCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlUm91dGVOYXZQYWdlKHBhZ2UsIGluZGV4KSB7XHJcbiAgICB2YXIgaHRtbEVsZW1lbnQgPSAkKCc8dWwgaWQ9XCJyb3V0ZS1wYWdlXCIgZGF0YS1pbmRleD1cIicgKyBpbmRleCArICdcIj48L3VsPicpLmFkZENsYXNzKFwicGFnaW5hdGlvbiBwYWdpbmF0aW9uLWxnXCIpO1xyXG4gICAgJC5nZXQoXCJyb3V0ZXMvc2l6ZVwiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocGFyc2VJbnQoZGF0YSkgLyBQQUdFX1NJWkUpICsgMTtcclxuICAgICAgICB2YXIgcHJldkRpc2FibGVkID0gKGluZGV4ID09PSAwID8gJ2Rpc2FibGVkJyA6ICcnKTtcclxuICAgICAgICB2YXIgbmV4dERpc2FibGVkID0gKGluZGV4ID09PSBzaXplIC0gMSA/ICdkaXNhYmxlZCcgOiAnJyk7XHJcbiAgICAgICAgdmFyIHByZXYgPSAkKCc8bGkgY2xhc3M9XCJwYWdlLWl0ZW0gJyArIHByZXZEaXNhYmxlZCArICdcIj48L2xpPicpLmFwcGVuZCgnPGEgY2xhc3M9XCJwYWdlLWxpbmtcIiBocmVmPVwiI1wiIGRhdGEtbmV4dD1cIi0xXCIgdGFiaW5kZXg9XCItMVwiPlByZXZpb3VzPC9hPicpO1xyXG4gICAgICAgIHZhciBuZXh0ID0gJCgnPGxpIGNsYXNzPVwicGFnZS1pdGVtICcgKyBuZXh0RGlzYWJsZWQgKyAnXCI+PC9saT4nKS5hcHBlbmQoJzxhIGNsYXNzPVwicGFnZS1saW5rXCIgZGF0YS1uZXh0PVwiMVwiIGhyZWY9XCIjXCI+TmV4dDwvYT4nKTtcclxuXHJcbiAgICAgICAgaHRtbEVsZW1lbnQuYXBwZW5kKHByZXYpO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBhY3RpdmUgPSAnJztcclxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSBpKSB7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmUgPSBcImFjdGl2ZVwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gJCgnPGxpIGNsYXNzPVwicGFnZS1pdGVtICcgKyBhY3RpdmUgKyAnXCI+PGEgY2xhc3M9XCJwYWdlLWxpbmtcIiBkYXRhLWluZGV4PVwiJyArIGkgKyAnXCIgaHJlZj1cIiNcIj4nICsgKGkgKyAxKSArICc8L2E+PC9saT4nKTtcclxuICAgICAgICAgICAgaHRtbEVsZW1lbnQuYXBwZW5kKGl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBodG1sRWxlbWVudC5hcHBlbmQobmV4dCk7XHJcbiAgICAgICAgJChwYWdlKS5odG1sKGh0bWxFbGVtZW50KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkUm91dGVUYWJsZShtYWluSW5kZXgpIHtcclxuICAgIHZhciBzdGFydCA9IG1haW5JbmRleCAqIFBBR0VfU0laRSwgc3RvcCA9ICgoKG1haW5JbmRleCArIDEpICogUEFHRV9TSVpFKSkgLSAxO1xyXG4gICAgJC5nZXQoJy9yb3V0ZXMvJyArIHN0YXJ0ICsgJy8nICsgc3RvcCwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB2YXIgaHRtbFRhYmxlID0gJyc7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gMDtcclxuICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKHJvdXRlKSB7XHJcbiAgICAgICAgICAgIGh0bWxUYWJsZSA9IGNyZWF0ZVJvdXRlUmVjb3JkKGh0bWxUYWJsZSwgaW5kZXggKyAobWFpbkluZGV4ICogUEFHRV9TSVpFKSwgcm91dGUpO1xyXG4gICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcjcm91dGVzLXRhYmxlLWJvZHknKS5odG1sKGh0bWxUYWJsZSk7XHJcbiAgICAgICAgJCgnI2FkZC1yb3V0ZS1tb2RhbCcpLm9uKCdoaWRkZW4uYnMubW9kYWwnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBsb2FkUm91dGUoMCk7XHJcbiAgICAgICAgfSlcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlZGl0Um91dGUoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIGlkID0gJCh0aGlzKS5kYXRhKCdpZCcpO1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICcvcm91dGVzLycgKyBpZCxcclxuICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHZhciBmb3JtID0gJChcIiNhZGRSb3V0ZVwiKTtcclxuICAgICAgICAgICAgZm9ybS5maW5kKCcjbmFtZScpLnZhbChyZXN1bHQubmFtZSk7XHJcbiAgICAgICAgICAgIGZvcm0uZmluZCgnI21ldGVycycpLnZhbChyZXN1bHQubWV0ZXJzKTtcclxuICAgICAgICAgICAgZm9ybS5maW5kKCcjc2VnbWVudElkJykudmFsKHJlc3VsdC5zZWdtZW50SWQpO1xyXG4gICAgICAgICAgICBmb3JtLmZpbmQoJyNjb3VudHJpZXMnKS52YWwocmVzdWx0LmNvdW50cnkpO1xyXG4gICAgICAgICAgICAvL2dwcy5yZXBsYWNlKC8oLiopLCguKiksKC4qKS9nbSwgJ3sgXCJsYXRcIjogJDEsIFwibG9uXCI6ICQyLCBcImVsXCI6ICQzIH0sJyk7XHJcbiAgICAgICAgICAgIHZhciBncHNDdnMgPSBKU09OLnN0cmluZ2lmeShyZXN1bHQuZ3BzKTtcclxuICAgICAgICAgICAgZm9ybS5maW5kKCcjZ3BzJykuYXBwZW5kKGdwc0N2cyk7XHJcbiAgICAgICAgICAgICQoJyNhZGQtcm91dGUtbW9kYWwnKS5tb2RhbCgnc2hvdycpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93Um91dGVNb2RhbChlKSB7XHJcbiAgICB2YXIgbmFtZSA9ICQoZS5yZWxhdGVkVGFyZ2V0KS5kYXRhKCdyb3V0ZS1uYW1lJyk7XHJcbiAgICB2YXIgdGhhdCA9ICQodGhpcyk7XHJcbiAgICAkLmdldChcIi9yb3V0ZXMvXCIgKyBuYW1lLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHZhciB0aXRsZSA9IGRhdGEubmFtZTtcclxuICAgICAgICBpZiAoZGF0YS5zZWdlbWVudElkKSB7XHJcbiAgICAgICAgICAgIHRpdGxlID0gJzxhIHRhcmdldD1cIl9ibGFua1wiIGhyZWY9XCJodHRwczovL3d3dy5zdHJhdmEuY29tL3NlZ21lbnRzLycgKyBkYXRhLnNlZ2VtZW50SWQgKyAnXCI+JyArIHRpdGxlICsgJyA8L2E+JztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhhdC5maW5kKCcjc2hvdy1yb3V0ZS1tb2RhbC10aXRsZScpLmh0bWwodGl0bGUpO1xyXG4gICAgICAgIHZhciBodG1sID0gJzxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbVwiPjxoNSBjbGFzcz1cImNhcmQtdGl0bGVcIj5EaXNwbGF5IExlbmdodDo8L2g1PicgKyBkYXRhLm1ldGVycyArICcgbTwvbGk+JztcclxuICAgICAgICBodG1sICs9ICc8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW1cIj48aDUgY2xhc3M9XCJjYXJkLXRpdGxlXCI+R3BzIExlbmdodDo8L2g1PicgKyBkYXRhLmdwc0xlbmdodCArICcgbTwvbGk+JztcclxuICAgICAgICBodG1sICs9ICc8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW1cIj48aDUgY2xhc3M9XCJjYXJkLXRpdGxlXCI+Q291bnRyeTo8L2g1PicgKyBkYXRhLmNvdW50cnkgKyAnPC9saT4nO1xyXG4gICAgICAgIHRoYXQuZmluZCgnLmNhcmQgLmxpc3QtZ3JvdXAnKS5odG1sKGh0bWwpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHsgbG9hZFJvdXRlcywgY3JlYXRlUm91dGVSZWNvcmQsIGxvYWRSb3V0ZSwgbG9hZFJvdXRlVGFibGUsXHJcbiAgICAgY3JlYXRlUm91dGVOYXZQYWdlLCBlZGl0Um91dGUsIHNob3dSb3V0ZU1vZGFsIH0iLCJcclxudmFyIGxvYWRVc2VycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICQuZ2V0KFwiL3VzZXJzXCIsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgdmFyIGh0bWwgPSAnJztcclxuICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGh0bWwgKz0gJzxvcHRpb24gdmFsdWU9XCInICsgdmFsdWUuaWQgKyAnXCI+JyArIHZhbHVlLmZpcnN0TmFtZSArICcgJyArIHZhbHVlLmxhc3ROYW1lICsgJzwvb3B0aW9uPidcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKHRoYXQpLmh0bWwoaHRtbClcclxuICAgIH0pO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gZWRpdFVzZXIoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIGlkID0gJCh0aGlzKS5kYXRhKCdpZCcpO1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICcvdXNlcnMvJyArIGlkLFxyXG4gICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgdmFyIGZvcm0gPSAkKFwiI2FkZFVzZXJGb3JtXCIpO1xyXG4gICAgICAgICAgICBmb3JtLmZpbmQoJyNmaXJzdE5hbWUnKS52YWwocmVzdWx0LmZpcnN0TmFtZSk7XHJcbiAgICAgICAgICAgIGZvcm0uZmluZCgnI2xhc3ROYW1lJykudmFsKHJlc3VsdC5sYXN0TmFtZSk7XHJcbiAgICAgICAgICAgIGZvcm0uZmluZCgnI3VzZXJJZCcpLnZhbChyZXN1bHQuaWQpO1xyXG4gICAgICAgICAgICAkLmdldCgnL3N0cmF2YS91cmwnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IGRhdGEudXJsLnJlcGxhY2UoXCIlMjRcIiwgcmVzdWx0LmlkKTtcclxuICAgICAgICAgICAgICAgICQoJy5zdHJhdmEtdXJsJykuYXR0cignaHJlZicsIHVybCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgY29ubmVjdCA9ICQoXCIuc3RyYXZhLWNvbm5lY3RcIik7XHJcbiAgICAgICAgICAgIGNvbm5lY3QucmVtb3ZlQ2xhc3MoXCJzci1vbmx5XCIpO1xyXG4gICAgICAgICAgICAkKCcjYWRkVXNlck1vZGFsJykubW9kYWwoJ3Nob3cnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZFVzZXIoKSB7XHJcbiAgICAkKCcjbG9hZCcpLmxvYWQoJy91c2VyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuZmluZCgnI3VzZXJzLWJvZHknKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgICAgICAkLmdldChcIi91c2Vycy9cIiwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBodG1sID0gJyc7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9IGRhdGFbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPHRyPjx0ZD48YSBocmVmPVwiI1wiIGRhdGEtaWQ9XCInICsgdXNlci5pZCArICdcIj4nICsgKGkgKyAxKSArICc8L2E+PC90ZD48dGQ+JyArIHVzZXIuZmlyc3ROYW1lICsgJzwvdGQ+PHRkPicgKyB1c2VyLmxhc3ROYW1lICsgJzwvdGQ+JztcclxuICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8dGQ+PGEgY2xhc3M9XCJlZGl0LXVzZXJcIiBocmVmPVwiI1wiIGRhdGEtaWQ9XCInICsgdXNlci5pZCArICdcIj48aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zXCI+Y3JlYXRlPC9pPjwvYT48YSBjbGFzcz1cImRlbC11c2VyXCIgaHJlZj1cIiNcIiBkYXRhLWlkPVwiJyArIHVzZXIuaWQgKyAnXCI+PGkgYXJpYS1oaWRkZW49XCJ0cnVlXCIgdGl0bGU9XCJEZWxldGUgdXNlclwiIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5kZWxldGU8L2k+PC9hPjwvdGQ+JyArICc8L3RyPidcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICQodGhhdCkuaHRtbChodG1sKTtcclxuICAgICAgICAgICAgICAgICQoJyNhZGRVc2VyTW9kYWwnKS5vbignaGlkZGVuLmJzLm1vZGFsJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkVXNlcigpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHsgbG9hZFVzZXJzLCBsb2FkVXNlciwgZWRpdFVzZXIgfSIsImltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy91dGlscyc7XHJcbmltcG9ydCB7IFVQREFURV9GUkVRLCBQQUdFX1NJWkUsIFJBVElPTiB9IGZyb20gJy4uL3V0aWxzL2dsb2JhbHMnO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGxvYWRIaXN0b3J5SW5kZXgoaW5kZXgpIHtcclxuICAgIGxvYWRIaXN0b3J5KGluZGV4KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZEhpc3RvcnkobWFpbkluZGV4KSB7XHJcbiAgICAkKCcjbG9hZCcpLmxvYWQoJy9oaXN0b3J5JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuZmluZCgnI2hpc3RvcnknKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbG9hZExhc3QzU2Vzc2lvbnMoKTtcclxuICAgICAgICAgICAgbG9hZEhpc3RvcnlMaXN0KCQodGhpcyksIG1haW5JbmRleCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gbG9hZExhc3QzU2Vzc2lvbnMoKSB7XHJcbiAgICAkLmdldCgnL3Nlc3Npb24vJyArIDAgKyAnLycgKyAyLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHZhciBodG1sQ2FyZHMgPSAnJztcclxuICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKHNlc3Npb24pIHtcclxuICAgICAgICAgICAgaHRtbENhcmRzID0gY3JlYXRlQ2FyZChodG1sQ2FyZHMsIHNlc3Npb24pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcjY2FyZHMnKS5odG1sKCc8ZGl2IGNsYXNzPVwiY29sXCI+PGRpdiBjbGFzcz1cImNhcmQtZGVja1wiPicgKyBodG1sQ2FyZHMgKyAnPC9kaXY+PC9kaXY+Jyk7XHJcbiAgICAgICAgJCgnLmdweC10cmFjaycpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnRyaWdnZXIoXCJsb2FkLW1hcFwiLCB0aGlzKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkSGlzdG9yeUxpc3QodGhhdCwgbWFpbkluZGV4KSB7XHJcbiAgICB2YXIgc3RhcnQgPSBtYWluSW5kZXggKiBQQUdFX1NJWkUsIHN0b3AgPSAoKChtYWluSW5kZXggKyAxKSAqIFBBR0VfU0laRSkpIC0gMTtcclxuICAgICQuZ2V0KCcvc2Vzc2lvbi8nICsgc3RhcnQgKyAnLycgKyBzdG9wLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICQuZ2V0KCcvdXNlcnMnLCBmdW5jdGlvbiAodXNlcnMpIHtcclxuICAgICAgICAgICAgdmFyIGh0bWxUYWJsZSA9ICcnLCBpbmRleCA9IDA7XHJcbiAgICAgICAgICAgIHZhciB1c2VyTWFwID0gdXNlcnMucmVkdWNlKGZ1bmN0aW9uKG1hcCwgb2JqKSB7XHJcbiAgICAgICAgICAgICAgICBtYXBbb2JqLmlkXSA9IG9iajtcclxuICAgICAgICAgICAgICAgIHJldHVybiBtYXA7XHJcbiAgICAgICAgICAgIH0sIHt9KTtcclxuICAgICAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChzZXNzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICBodG1sVGFibGUgPSBjcmVhdGVMYXBUYWJsZVJlY29yZChodG1sVGFibGUsIGluZGV4ICsgKG1haW5JbmRleCAqIFBBR0VfU0laRSksIHNlc3Npb24sIHVzZXJNYXApO1xyXG4gICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkKCcjaGlzdG9yLXRhYmxlLWJvZHknKS5odG1sKGh0bWxUYWJsZSk7XHJcbiAgICAgICAgICAgIHZhciBwYWcgPSB0aGF0LmZpbmQoJy5wYWdlJyk7XHJcbiAgICAgICAgICAgIGNyZWF0ZUhpc3RvcnlOYXZQYWdlKHBhZywgbWFpbkluZGV4KTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuSGlzdG9yeShlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB2YXIgbmV4dCA9IHBhcnNlSW50KCQodGhpcykuZGF0YSgnbmV4dCcpKSwgaW5kZXggPSBwYXJzZUludCgkKHRoaXMpLmRhdGEoJ2luZGV4JykpLFxyXG4gICAgICAgIG1haW5JbmRleCA9IHBhcnNlSW50KCQoJyNoaXN0b3J5LXBhZ2UnKS5kYXRhKCdpbmRleCcpKTtcclxuICAgIGlmICghaXNOYU4obmV4dCkpIHtcclxuICAgICAgICBtYWluSW5kZXggKz0gbmV4dDtcclxuICAgIH0gZWxzZSBpZiAoIWlzTmFOKGluZGV4KSkge1xyXG4gICAgICAgIG1haW5JbmRleCA9IGluZGV4O1xyXG4gICAgfVxyXG4gICAgbG9hZEhpc3RvcnlMaXN0KCQoJyNoaXN0b3J5LXRhYmxlJyksIG1haW5JbmRleCk7XHJcbn1cclxuXHJcblxyXG52YXIgY3JlYXRlQ2FyZCA9IGZ1bmN0aW9uIChodG1sQ2FyZHMsIHNlc3Npb24pIHtcclxuICAgIGh0bWxDYXJkcyArPSAnPGRpdiBjbGFzcz1cImNhcmQgZ3B4LXRyYWNrXCIgZGF0YS1uYW1lPVwiJyArIHNlc3Npb24ubmFtZSArICdcIlwiPic7XHJcbiAgICBodG1sQ2FyZHMgKz0gJzxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj4nO1xyXG4gICAgaHRtbENhcmRzICs9ICc8ZGl2IGNsYXNzPVwiY2FyZC1tYXAtdG9wIFwiPjwvZGl2Pic7XHJcbiAgICBodG1sQ2FyZHMgKz0gJzxoNSBjbGFzcz1cImNhcmQtdGl0bGUgbXQtMlwiPjxhIGNsYXNzPVwic2Vzc2lvbnNcIiBkYXRhLW5hbWU9XCInICsgc2Vzc2lvbi5uYW1lICsgJ1wiIGhyZWY9XCIvc2Vzc2lvblwiPicgKyB1dGlscy5zZXNzaW9uTmFtZVRvUmVhZGFibGUoc2Vzc2lvbi5uYW1lKSArICc8L2E+PC9oNT4nO1xyXG4gICAgaHRtbENhcmRzICs9ICc8cCBjbGFzcz1cImNhcmQtdGV4dFwiPkxlbmd0aDogJyArIHBhcnNlSW50KHNlc3Npb24uZW5kU3RhdHMubWV0ZXJzKSArICdtLCBUaW1lOiAnICsgdXRpbHMuZm10TVNTKHBhcnNlSW50KHNlc3Npb24uZW5kU3RhdHMuc2Vjb25kcykpICsgJzwvcD4nO1xyXG4gICAgaHRtbENhcmRzICs9ICc8YSBocmVmPVwiL3N0cmF2YS91cGxvYWQvJyArIHNlc3Npb24ubmFtZSArICdcIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBzdHJhdmEgYnRuLWJsb2NrXCI+VXBsb2FkIHRvIFN0cmF2YTwvYT4nO1xyXG4gICAgaHRtbENhcmRzICs9ICc8L2Rpdj4nO1xyXG4gICAgaHRtbENhcmRzICs9ICc8L2Rpdj4nO1xyXG4gICAgcmV0dXJuIGh0bWxDYXJkcztcclxufTtcclxuXHJcbnZhciBjcmVhdGVMYXBUYWJsZVJlY29yZCA9IGZ1bmN0aW9uIChodG1sVGFibGUsIGluZGV4LCBzZXNzaW9uLCB1c2VyTWFwKSB7XHJcbiAgICB2YXIgdXNlciA9IHVzZXJNYXBbc2Vzc2lvbi51c2VyXTtcclxuICAgIGh0bWxUYWJsZSArPSAnPHRyPic7XHJcbiAgICBodG1sVGFibGUgKz0gJzx0aCBzY29wZT1cInJvd1wiPicgKyAoaW5kZXggKyAxKSArICc8L3RoPic7XHJcbiAgICBodG1sVGFibGUgKz0gJzx0ZD48YSBjbGFzcz1cInNlc3Npb25zXCIgZGF0YS1uYW1lPVwiJyArIHNlc3Npb24ubmFtZSArICdcIiBocmVmPVwiLz9uYW1lPScrc2Vzc2lvbi5uYW1lKycjc2Vzc2lvblwiPicgKyB1dGlscy5zZXNzaW9uTmFtZVRvUmVhZGFibGUoc2Vzc2lvbi5uYW1lKSArICc8L2E+PC90ZD4nO1xyXG4gICAgaHRtbFRhYmxlICs9ICc8dGQ+TGVuZ3RoOiAnICsgcGFyc2VJbnQoc2Vzc2lvbi5lbmRTdGF0cy5tZXRlcnMpICsgJ208L3RkPic7XHJcbiAgICBpZiAodXNlcikge1xyXG4gICAgICAgIGh0bWxUYWJsZSArPSAnPHRkPicgKyB1c2VyLmZpcnN0TmFtZSArICcgJyArIHVzZXIubGFzdE5hbWUgKyAnPC90ZD4nO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBodG1sVGFibGUgKz0gJzx0ZD48L3RkPic7XHJcbiAgICB9XHJcbiAgICBodG1sVGFibGUgKz0gJzx0ZD4gPGEgaHJlZj1cIi9zZXNzaW9ucy8nICsgc2Vzc2lvbi5uYW1lICsgJy5ncHhcIj48aSBjbGFzcz1cIm1hdGVyaWFsLWljb25zIG1kLTM2XCI+ZmlsZV9kb3dubG9hZDwvaT48YSBjbGFzcz1cInN0cmF2YVwiIGhyZWY9XCIvc3RyYXZhL3VwbG9hZC8nICsgc2Vzc2lvbi5uYW1lICsgJ1wiPjxpIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIHRpdGxlPVwiVXBsb2FkIHRvIFN0cmF2YVwiIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnMgbWQtMzZcIj5jbG91ZF91cGxvYWQ8L2k+PC9hPiA8YSBjbGFzcz1cImRlbC1zZXNzaW9uXCIgaHJlZj1cIiNcIiBkYXRhLW5hbWU9XCInICsgc2Vzc2lvbi5uYW1lICsgJ1wiPjxpIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIHRpdGxlPVwiRGVsZXRlIHNlc3Npb24gbG9jYWxcIiBjbGFzcz1cIm1hdGVyaWFsLWljb25zIG1kLTM2XCI+ZGVsZXRlPC9pPjwvYT48L3RkPic7XHJcbiAgICBodG1sVGFibGUgKz0gJzwvdHI+JztcclxuICAgIHJldHVybiBodG1sVGFibGU7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVIaXN0b3J5TmF2UGFnZShwYWdlLCBpbmRleCkge1xyXG4gICAgdmFyIGh0bWxFbGVtZW50ID0gJCgnPHVsIGlkPVwiaGlzdG9yeS1wYWdlXCIgZGF0YS1pbmRleD1cIicgKyBpbmRleCArICdcIj48L3VsPicpLmFkZENsYXNzKFwicGFnaW5hdGlvbiBwYWdpbmF0aW9uLWxnXCIpO1xyXG4gICAgJC5nZXQoXCJzZXNzaW9uL3NpemVcIiwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB2YXIgc2l6ZSA9IHBhcnNlSW50KHBhcnNlSW50KGRhdGEpIC8gUEFHRV9TSVpFKSArIDE7XHJcbiAgICAgICAgdmFyIHByZXZEaXNhYmxlZCA9IChpbmRleCA9PT0gMCA/ICdkaXNhYmxlZCcgOiAnJyk7XHJcbiAgICAgICAgdmFyIG5leHREaXNhYmxlZCA9IChpbmRleCA9PT0gc2l6ZSAtIDEgPyAnZGlzYWJsZWQnIDogJycpO1xyXG4gICAgICAgIHZhciBwcmV2ID0gJCgnPGxpIGNsYXNzPVwicGFnZS1pdGVtICcgKyBwcmV2RGlzYWJsZWQgKyAnXCI+PC9saT4nKS5hcHBlbmQoJzxhIGNsYXNzPVwicGFnZS1saW5rXCIgaHJlZj1cIiNcIiBkYXRhLW5leHQ9XCItMVwiIHRhYmluZGV4PVwiLTFcIj5QcmV2aW91czwvYT4nKTtcclxuICAgICAgICB2YXIgbmV4dCA9ICQoJzxsaSBjbGFzcz1cInBhZ2UtaXRlbSAnICsgbmV4dERpc2FibGVkICsgJ1wiPjwvbGk+JykuYXBwZW5kKCc8YSBjbGFzcz1cInBhZ2UtbGlua1wiIGRhdGEtbmV4dD1cIjFcIiBocmVmPVwiI1wiPk5leHQ8L2E+Jyk7XHJcblxyXG4gICAgICAgIGh0bWxFbGVtZW50LmFwcGVuZChwcmV2KTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgYWN0aXZlID0gJyc7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gaSkge1xyXG4gICAgICAgICAgICAgICAgYWN0aXZlID0gXCJhY3RpdmVcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgaXRlbSA9ICQoJzxsaSBjbGFzcz1cInBhZ2UtaXRlbSAnICsgYWN0aXZlICsgJ1wiPjxhIGNsYXNzPVwicGFnZS1saW5rXCIgZGF0YS1pbmRleD1cIicgKyBpICsgJ1wiIGhyZWY9XCIjXCI+JyArIChpICsgMSkgKyAnPC9hPjwvbGk+Jyk7XHJcbiAgICAgICAgICAgIGh0bWxFbGVtZW50LmFwcGVuZChpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaHRtbEVsZW1lbnQuYXBwZW5kKG5leHQpO1xyXG4gICAgICAgICQocGFnZSkuaHRtbChodG1sRWxlbWVudCk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHsgbG9hZEhpc3RvcnlJbmRleCwgbG9hZEhpc3RvcnksIGxvYWRIaXN0b3J5TGlzdCwgb3Blbkhpc3RvcnkgfSIsImltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscy91dGlscyc7XHJcbmltcG9ydCBncmFwaFV0aWxzIGZyb20gJy4uL3V0aWxzL2dyYXBoVXRpbHMnO1xyXG5pbXBvcnQgeyBVUERBVEVfRlJFUSwgUEFHRV9TSVpFLCBSQVRJT04sIHJ1biB9IGZyb20gJy4uL3V0aWxzL2dsb2JhbHMnO1xyXG5pbXBvcnQgZnJvbnQgZnJvbSAnLi4vZnJvbnQvaW5kZXgnO1xyXG5pbXBvcnQgcm91dGUgZnJvbSAnLi4vcm91dGUvaW5kZXgnO1xyXG5pbXBvcnQgdXNlciBmcm9tICcuLi91c2VyL2luZGV4JztcclxuaW1wb3J0IG1hcFV0aWxzIGZyb20gJy4uL3V0aWxzL21hcFV0aWxzJ1xyXG5pbXBvcnQgbWFwIGZyb20gJy4uL21hcC9pbmRleCdcclxuaW1wb3J0IGhpc3RvcnkgZnJvbSAnLi4vaGlzdG9yeS9pbmRleCdcclxuXHJcblxyXG5mdW5jdGlvbiBsb2FkU2Vzc2lvbihuYW1lKSB7XHJcbiAgICAkKCcjbG9hZCcpLmxvYWQoJy9zZXNzaW9ucycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmZpbmQoJyNyb3V0ZXMnKS5lYWNoKHJvdXRlLmxvYWRSb3V0ZXMpO1xyXG4gICAgICAgICQodGhpcykuZmluZCgnI3Nlc3Npb24tdXNlcicpLmVhY2godXNlci5sb2FkVXNlcnMpO1xyXG4gICAgICAgICQodGhpcykuZmluZCgnI2hpc3Rvcnktc2Vzc2lvbicpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdGl0bGUgPSBcIkhpc3RvcnlcIjtcclxuICAgICAgICAgICAgJC5nZXQoXCIvc2Vzc2lvbi9cIiArIG5hbWUsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9IGZyb250LmdldEh0bWwodGl0bGUsIGRhdGEuZW5kU3RhdHMsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgJCgnI3JvdXRlcycpLnZhbChkYXRhLnJvdXRlKTtcclxuICAgICAgICAgICAgICAgICQoJyNzZXNzaW9uLXVzZXInKS52YWwoZGF0YS51c2VyKTtcclxuICAgICAgICAgICAgICAgIGlmIChodG1sKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3RhYmxlLWNvbnRlbnQnKS5odG1sKGh0bWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNsYXBzLWJvZHknKS5odG1sKGdldExhcEh0bWwodGl0bGUsIGRhdGEuZW5kU3RhdHMpKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXBVdGlscy5hZGRHcHhUcmFja1RvTWFwKG5hbWUsICQoXCIjbGl2ZS1tYXBcIikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZ3JhcGhVdGlscy5hZGRHcmFwaChkYXRhLnJhdywgZGF0YS5yYXdIciwgcGFyc2VJbnQoZGF0YS5zdGFydCksIGRhdGEuc3Ryb2tlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0TGFwSHRtbChsYWJlbCwganNvbiwgcmV2ZXJzZSkge1xyXG4gICAgdmFyIGh0bWwgPSAnJztcclxuICAgIGlmIChwYXJzZUludChqc29uLnRvdGFsTGFwcykgPiAwKSB7XHJcbiAgICAgICAgdmFyIGxhcE51bSA9IDE7XHJcbiAgICAgICAgdmFyIGxhcHMgPSBqc29uLmxhcHM7XHJcbiAgICAgICAgaWYgKHJldmVyc2UpIHtcclxuICAgICAgICAgICAgbGFwcy5yZXZlcnNlKCk7XHJcbiAgICAgICAgICAgIGxhcE51bSA9IGxhcHMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsYXBzLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8dHI+PHRoIHNjb3BlPVwicm93XCI+JyArIGxhcE51bSArICc8L3RoPjx0ZD4nICsgcGFyc2VJbnQodmFsdWUubWV0ZXJzKSArICc8L3RkPjx0ZD4nICsgdXRpbHMuZm10TVNTKHBhcnNlSW50KHZhbHVlLnNlY29uZHMpKSArICc8L3RkPic7XHJcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8dGQ+JyArIE1hdGgucm91bmQocGFyc2VGbG9hdCh2YWx1ZS53YXR0KSAqIDEwKSAvIDEwICsgJ3c8L3RkPjwvdHI+JztcclxuICAgICAgICAgICAgICAgIGlmIChyZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFwTnVtLS07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhcE51bSsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuICAgIHJldHVybiBodG1sO1xyXG59XHJcblxyXG5cclxudmFyIGNsaWNrU2Vzc2lvbiA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB2YXIgbmFtZSA9ICQodGhpcykuZGF0YSgnbmFtZScpO1xyXG4gICAgbG9hZFNlc3Npb24obmFtZSk7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB7IGxvYWRTZXNzaW9uLCBjbGlja1Nlc3Npb24sIGdldExhcEh0bWwgfSIsImltcG9ydCByb3V0ZSBmcm9tICcuLi9yb3V0ZS9pbmRleCc7XHJcbmltcG9ydCB1c2VyIGZyb20gJy4uL3VzZXIvaW5kZXgnO1xyXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMvdXRpbHMnXHJcbmltcG9ydCBtYXBVdGlscyBmcm9tICcuLi91dGlscy9tYXBVdGlscydcclxuaW1wb3J0IGdsb2JhbHMgZnJvbSAnLi4vdXRpbHMvZ2xvYmFscyc7XHJcbmltcG9ydCBzZXNzaW9uIGZyb20gJy4uL3Nlc3Npb24vaW5kZXgnO1xyXG5pbXBvcnQgbWFwIGZyb20gJy4uL21hcC9pbmRleCdcclxuXHJcbnZhciB0aW1lT3V0O1xyXG5cclxuZnVuY3Rpb24gbG9hZE1haW4oKSB7XHJcbiAgICAkKCcjbG9hZCcpLmxvYWQoJy9tYWluJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQodGhpcykuZmluZCgnI3JvdXRlcycpLmVhY2gocm91dGUubG9hZFJvdXRlcyk7XHJcbiAgICAgICAgJCh0aGlzKS5maW5kKCcjc2Vzc2lvbi11c2VyJykuZWFjaCh1c2VyLmxvYWRVc2Vycyk7XHJcbiAgICAgICAgJC5nZXQoXCIvcm93L3N0YXR1c1wiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT09ICdST1dJTkcnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRCdXR0b24gPSAkKCcjc3RhcnRSb3cnKTtcclxuICAgICAgICAgICAgICAgIGlmICh1dGlscy5nZXRVcmxQYXJhbWV0ZXIoXCJ0ZXN0XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRCdXR0b24gPSAkKCcjc3RhcnRTaW11bGF0b3InKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgc3RhcnQoc3RhcnRCdXR0b24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vUnVuIHNpbXVsYXRvciBpZiB0ZXN0LlxyXG4gICAgICAgIGlmICh1dGlscy5nZXRVcmxQYXJhbWV0ZXIoXCJ0ZXN0XCIpKSB7XHJcbiAgICAgICAgICAgICQoJyNzdGFydFJvdycpLmF0dHIoXCJpZFwiLCBcInN0YXJ0U2ltdWxhdG9yXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gc3RhcnRSb3coZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdmFyIHJvdXRlcyA9ICQoJyNyb3V0ZXMnKS52YWwoKTtcclxuICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICQuZ2V0KFwiL3Jvdy9zdGFydFwiLCB7IHJvdXRlczogcm91dGVzIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzdGFydCh0aGF0KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdG9wUm93KGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHZhciB0aGF0ID0gJCh0aGlzKTtcclxuICAgIGNsZWFyVGltZW91dCh0aW1lT3V0KTtcclxuICAgIGdsb2JhbHMucnVuID0gZmFsc2U7XHJcbiAgICB2YXIgcm91dGVzID0gJCgnI3JvdXRlcycpLnZhbCgpO1xyXG4gICAgdmFyIHVzZXIgPSAkKCcjc2Vzc2lvbi11c2VyJykudmFsKCk7XHJcbiAgICAkLmdldChcIi9yb3cvc3RvcFwiLCB7IHJvdXRlczogcm91dGVzLCB1c2VyOiB1c2VyIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgJCgnI3RhYmxlLWNvbnRlbnQnKS5odG1sKGdldEh0bWwoXCJTdG9wcGVkXCIsIGRhdGEsIGZhbHNlKSk7XHJcbiAgICAgICAgdmFyIHN0YXJ0Um93ID0gJChcIiNzdGFydFJvd1wiKTtcclxuICAgICAgICBzdGFydFJvdy5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIHN0YXJ0Um93LnJlbW92ZUNsYXNzKCdkLW5vbmUnKTtcclxuICAgICAgICBzdGFydFJvdy5odG1sKCdTdGFydCByb3cnKTtcclxuICAgICAgICB0aGF0LmFkZENsYXNzKCdkLW5vbmUnKTtcclxuICAgICAgICAkKCcjcm91dGVzJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcclxuICAgICAgICAkKCcjc2Vzc2lvbi11c2VyJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcclxuICAgICAgICAkKFwiI3N0YXJ0U2ltdWxhdG9yXCIpLnJlbW92ZUF0dHIoJ2Rpc2FibGVkJyk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3RhcnQoc3RhcnRCdXR0b24pIHtcclxuICAgICQod2luZG93KS5zY3JvbGxUb3AoJCgnI21haW4nKS5vZmZzZXQoKS50b3ApOyAvL1Njcm9sbFxyXG4gICAgZ2V0X3Jvd0luZm8odHJ1ZSwgXCJSb3dpbmdcIik7XHJcbiAgICBtYXBVdGlscy5jbGVhbk1hcCgpO1xyXG4gICAgJCgnI3JvdXRlcycpLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAkKCcjc2Vzc2lvbi11c2VyJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICQoXCIjc3RhcnRTaW11bGF0b3JcIikuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcclxuICAgICQoc3RhcnRCdXR0b24pLmF0dHIoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XHJcbiAgICAkKHN0YXJ0QnV0dG9uKS5odG1sKCdSb3dpbmcuLi4nKTtcclxuICAgICQoc3RhcnRCdXR0b24pLmFkZENsYXNzKCdkLW5vbmUnKTtcclxuICAgICQoJyNzdG9wUm93JykucmVtb3ZlQ2xhc3MoJ2Qtbm9uZScpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRfcm93SW5mbyhjb250aW51ZXMsIHRpdGxlKSB7XHJcbiAgICBnbG9iYWxzLnJ1biA9IGNvbnRpbnVlcztcclxuICAgICQuZ2V0KFwiL3Jvd1wiLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHZhciBodG1sID0gZ2V0SHRtbCh0aXRsZSwgZGF0YSk7XHJcbiAgICAgICAgaWYgKGh0bWwpIHtcclxuICAgICAgICAgICAgJCgnI3RhYmxlLWNvbnRlbnQnKS5odG1sKGh0bWwpO1xyXG4gICAgICAgICAgICAkKCcjbGFwcy1ib2R5JykuaHRtbChzZXNzaW9uLmdldExhcEh0bWwodGl0bGUsIGRhdGEsIHRydWUpKTtcclxuICAgICAgICAgICAgdmFyIGxhdCA9IGRhdGEuZ3BzLmxhdDtcclxuICAgICAgICAgICAgdmFyIGxvbiA9IGRhdGEuZ3BzLmxvbjtcclxuICAgICAgICAgICAgdmFyIHAgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGxhdCwgbG9uKTtcclxuICAgICAgICAgICAgbWFwLmxpdmVQb2ludHMucHVzaChwKTtcclxuICAgICAgICAgICAgaWYgKG1hcC5saXZlQm91bmRzKSB7XHJcbiAgICAgICAgICAgICAgICBtYXAubGl2ZUJvdW5kcy5leHRlbmQocCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcG9seSA9IG1hcFV0aWxzLmNyZWF0ZVBvbHlMaW5lKG1hcC5saXZlUG9pbnRzKTtcclxuICAgICAgICAgICAgICAgIHBvbHkuc2V0TWFwKG1hcC5saXZlTWFwKTtcclxuICAgICAgICAgICAgICAgIG1hcC5saXZlTWFwLmZpdEJvdW5kcyhtYXAubGl2ZUJvdW5kcyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSkuZG9uZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGdsb2JhbHMucnVuKSB7XHJcbiAgICAgICAgICAgIHRpbWVPdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgZ2V0X3Jvd0luZm8odHJ1ZSwgdGl0bGUpOyB9LCBnbG9iYWxzLlVQREFURV9GUkVRKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGdldEh0bWwobGFiZWwsIGpzb24sIGRheSkge1xyXG4gICAgaWYgKHBhcnNlSW50KGpzb24ubWV0ZXJzKSA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBodG1sID0gJyc7XHJcbiAgICBpZiAoZGF5KSB7XHJcbiAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cInJvd1wiPjxkaXYgY2xhc3M9XCJjb2wtc20tNFwiPkRheTwvZGl2PjxkaXYgY2xhc3M9XCJjb2xcIj4nICsganNvbi5zdGFydC5zdWJzdHIoMiwganNvbi5zdGFydC5sYXN0SW5kZXhPZignVCcpIC0gMikgKyAnPC9kaXY+PC9kaXY+JztcclxuICAgIH1cclxuICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJyb3dcIj48ZGl2IGNsYXNzPVwiY29sLXNtLTRcIj5TdGFydDo8L2Rpdj48ZGl2IGNsYXNzPVwiY29sXCI+JyArIGpzb24uc3RhcnQuc3Vic3RyKGpzb24uc3RhcnQubGFzdEluZGV4T2YoJ1QnKSArIDEsIDgpICsgJzwvZGl2PjwvZGl2Pic7XHJcbiAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwicm93XCI+PGRpdiBjbGFzcz1cImNvbC1zbS00XCI+VGltZTo8L2Rpdj48ZGl2IGNsYXNzPVwiY29sXCI+JyArIHV0aWxzLmZtdE1TUyhwYXJzZUludChqc29uLnNlY29uZHMpKSArICc8L2Rpdj48L2Rpdj4nO1xyXG4gICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cInJvd1wiPjxkaXYgY2xhc3M9XCJjb2wtc20tNFwiPkxlbmd0aDo8L2Rpdj48ZGl2IGNsYXNzPVwiY29sXCI+JyArIHBhcnNlSW50KGpzb24ubWV0ZXJzKSArICcgbSAoJyArIHBhcnNlSW50KGpzb24ucm91dGVMYXApICsgJyk8L2Rpdj48L2Rpdj4nO1xyXG4gICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cInJvd1wiPjxkaXYgY2xhc3M9XCJjb2wtc20tNFwiPlBhY2U6PC9kaXY+PGRpdiBjbGFzcz1cImNvbFwiPicgKyBNYXRoLnJvdW5kKHBhcnNlRmxvYXQoanNvbi5wYWNlKSAqIDMuNiAqIDEwKSAvIDEwICsgJyBrbS90PC9kaXY+PC9kaXY+JztcclxuICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJyb3dcIj48ZGl2IGNsYXNzPVwiY29sLXNtLTRcIj41MDBtOjwvZGl2PjxkaXYgY2xhc3M9XCJjb2xcIj4nICsgdXRpbHMuZm10TVNTKHBhcnNlSW50KGpzb24ubGFwUGFjZSkpICsgJzwvZGl2PjwvZGl2Pic7XHJcbiAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwicm93XCI+PGRpdiBjbGFzcz1cImNvbC1zbS00XCI+Mms6PC9kaXY+PGRpdiBjbGFzcz1cImNvbFwiPicgKyB1dGlscy5mbXRNU1MocGFyc2VJbnQoanNvbi50b3dLUGFjZSkpICsgJzwvZGl2PjwvZGl2Pic7XHJcbiAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwicm93XCI+PGRpdiBjbGFzcz1cImNvbC1zbS00XCI+QXZnLlc6PC9kaXY+PGRpdiBjbGFzcz1cImNvbFwiPicgKyBNYXRoLnJvdW5kKHBhcnNlRmxvYXQoanNvbi53YXR0KSAqIDEwKSAvIDEwICsgJ3c8L2Rpdj48L2Rpdj4nO1xyXG4gICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cInJvd1wiPjxkaXYgY2xhc3M9XCJjb2wtc20tNFwiPlNSOjwvZGl2PjxkaXYgY2xhc3M9XCJjb2xcIj4nICsgTWF0aC5yb3VuZChwYXJzZUZsb2F0KGpzb24uc3Ryb2tlKSAqIDEwKSAvIDEwICsgJzwvZGl2PjwvZGl2Pic7XHJcbiAgICBpZiAocGFyc2VJbnQoanNvbi5ocikgPiAwKSB7XHJcbiAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cInJvd1wiPjxkaXYgY2xhc3M9XCJjb2wtc20tNFwiPkhSOjwvZGl2PjxkaXYgY2xhc3M9XCJjb2wgJyArIHV0aWxzLmdldEhlYXJ0UmF0ZUNvbG9yKHBhcnNlSW50KGpzb24uaHIpKSArICdcIj4nICsgcGFyc2VJbnQoanNvbi5ocikgKyAocGFyc2VJbnQoanNvbi5hdmdIcikgPiAwID8gJygnICsgcGFyc2VJbnQoanNvbi5hdmdIcikgKyAnKScgOiAnJykgKyAnPC9kaXY+PC9kaXY+JztcclxuICAgIH1cclxuICAgIGlmIChqc29uLmZpbGVOYW1lKSB7XHJcbiAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cInJvd1wiPjxkaXYgY2xhc3M9XCJjb2xcIj5BY3Rpb25zOjwvZGl2PjxkaXYgY2xhc3M9XCJjb2xcIj48YSBocmVmPVwiL3Nlc3Npb25zLycgKyBqc29uLmZpbGVOYW1lO1xyXG4gICAgICAgIGh0bWwgKz0gJ1wiPjxpIGNsYXNzPVwibWF0ZXJpYWwtaWNvbnNcIj5maWxlX2Rvd25sb2FkPC9pPjxhIGNsYXNzPVwic3RyYXZhXCIgaHJlZj1cIi9zdHJhdmEvdXBsb2FkLycgKyBqc29uLm5hbWU7XHJcbiAgICAgICAgaHRtbCArPSAnXCI+PGkgYXJpYS1oaWRkZW49XCJ0cnVlXCIgdGl0bGU9XCJVcGxvYWQgdG8gc3RyYXZhXCIgY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPmNsb3VkX3VwbG9hZDwvaT48L2E+JztcclxuICAgICAgICBodG1sICs9ICc8YSBjbGFzcz1cInNlc3Npb25zXCIgZGF0YS1uYW1lPVwiJyArIGpzb24ubmFtZSArICdcIiBocmVmPVwiL3Nlc3Npb25zXCI+PGkgYXJpYS1oaWRkZW49XCJ0cnVlXCIgdGl0bGU9XCJTZXNzaW9uXCIgY2xhc3M9XCJtYXRlcmlhbC1pY29uc1wiPmZpYmVyX25ldzwvaT48L2E+PC9kaXY+PC9kaXY+JztcclxuICAgIH1cclxuICAgIHJldHVybiBodG1sICsgXCJcIjtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHsgbG9hZE1haW4sIHN0YXJ0LCBnZXRfcm93SW5mbywgZ2V0SHRtbCwgc3RhcnRSb3csIHN0b3BSb3cgfTsiLCJpbXBvcnQgdXRpbHMgZnJvbSAnLi91dGlscy91dGlscyc7XHJcbmltcG9ydCBmcm9udCBmcm9tICcuL2Zyb250L2luZGV4JztcclxuaW1wb3J0IHJvdXRlIGZyb20gJy4vcm91dGUvaW5kZXgnO1xyXG5pbXBvcnQgdXNlciBmcm9tICcuL3VzZXIvaW5kZXgnO1xyXG5pbXBvcnQgbWFwVXRpbHMgZnJvbSAnLi91dGlscy9tYXBVdGlscydcclxuaW1wb3J0IG1hcCBmcm9tICcuL21hcC9pbmRleCdcclxuaW1wb3J0IGhpc3RvcnkgZnJvbSAnLi9oaXN0b3J5L2luZGV4J1xyXG5pbXBvcnQgc2Vzc2lvbiBmcm9tICcuL3Nlc3Npb24vaW5kZXgnXHJcblxyXG4vKipcclxuICogRGVjbGFyZXMgYSBuZXcgb2JqZWN0IGluIHRoZSB3aW5kb3cgbmFtZWx5IFF1ZXJ5U3RyaW5nIHRoYXQgY29udGFpbnMgZXZlcnkgZ2V0IHBhcmFtZXRlciBmcm9tIHRoZSBjdXJyZW50IFVSTCBhcyBhIHByb3BlcnR5XHJcbiAqL1xyXG53aW5kb3cuUXVlcnlTdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIGFub255bW91cywgaXMgZXhlY3V0ZWQgaW1tZWRpYXRlbHkgYW5kIFxyXG4gICAgLy8gdGhlIHJldHVybiB2YWx1ZSBpcyBhc3NpZ25lZCB0byBRdWVyeVN0cmluZyFcclxuICAgIHZhciBxdWVyeV9zdHJpbmcgPSB7fTtcclxuICAgIHZhciBxdWVyeSA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpO1xyXG4gICAgdmFyIHZhcnMgPSBxdWVyeS5zcGxpdChcIiZcIik7XHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHBhaXIgPSB2YXJzW2ldLnNwbGl0KFwiPVwiKTtcclxuXHJcbiAgICAgICAgLy8gSWYgZmlyc3QgZW50cnkgd2l0aCB0aGlzIG5hbWVcclxuICAgICAgICBpZiAodHlwZW9mIHF1ZXJ5X3N0cmluZ1twYWlyWzBdXSA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICBxdWVyeV9zdHJpbmdbcGFpclswXV0gPSBkZWNvZGVVUklDb21wb25lbnQocGFpclsxXSk7XHJcbiAgICAgICAgICAgIC8vIElmIHNlY29uZCBlbnRyeSB3aXRoIHRoaXMgbmFtZVxyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHF1ZXJ5X3N0cmluZ1twYWlyWzBdXSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICB2YXIgYXJyID0gW3F1ZXJ5X3N0cmluZ1twYWlyWzBdXSwgZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMV0pXTtcclxuICAgICAgICAgICAgcXVlcnlfc3RyaW5nW3BhaXJbMF1dID0gYXJyO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGlyZCBvciBsYXRlciBlbnRyeSB3aXRoIHRoaXMgbmFtZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5X3N0cmluZ1twYWlyWzBdXS5wdXNoKGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBxdWVyeV9zdHJpbmc7XHJcbn0oKTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIC8qKiBJbml0IHNoYXJlZCAqL1xyXG4gICAgZnJvbnQuZ2V0X3Jvd0luZm8oZmFsc2UsIFwiXCIpO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgJy5tYWluJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBmcm9udC5sb2FkTWFpbigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oXCJjbGlja1wiLCAnI3VzZXInLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHVzZXIubG9hZFVzZXIoKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgJyNoaXN0b3J5LXBhZ2UgYScsIGhpc3Rvcnkub3Blbkhpc3RvcnkpO1xyXG5cclxuICAgIC8vVE9ETzogcmVmYWN0b3J5XHJcbiAgICAkKGRvY3VtZW50KS5vbihcImNsaWNrXCIsICcjcm91dGUtcGFnZSBhJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIG5leHQgPSBwYXJzZUludCgkKHRoaXMpLmRhdGEoJ25leHQnKSksIGluZGV4ID0gcGFyc2VJbnQoJCh0aGlzKS5kYXRhKCdpbmRleCcpKSxcclxuICAgICAgICAgICAgbWFpbkluZGV4ID0gcGFyc2VJbnQoJCgnI3JvdXRlLXBhZ2UnKS5kYXRhKCdpbmRleCcpKTtcclxuICAgICAgICBpZiAoIWlzTmFOKG5leHQpKSB7XHJcbiAgICAgICAgICAgIG1haW5JbmRleCArPSBuZXh0O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKGluZGV4KSkge1xyXG4gICAgICAgICAgICBtYWluSW5kZXggPSBpbmRleDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHBhZyA9ICQoJyNyb3V0ZXMtdGFibGUnKS5maW5kKCcucGFnZScpO1xyXG4gICAgICAgIHJvdXRlLmNyZWF0ZVJvdXRlTmF2UGFnZShwYWdbMF0sIG1haW5JbmRleCk7XHJcbiAgICAgICAgcm91dGUubG9hZFJvdXRlVGFibGUobWFpbkluZGV4KTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgJy5uYXYtbGluaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgJCgnI21haW4tbmF2JykuZmluZChcIi5uYXYtaXRlbVwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oXCJjbGlja1wiLCAnLnNlc3Npb25zJywgc2Vzc2lvbi5jbGlja1Nlc3Npb24pO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgJ2EjaGlzdG9yeScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgaGlzdG9yeS5sb2FkSGlzdG9yeUluZGV4KDAsIDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oXCJjbGlja1wiLCAnYSNyb3V0ZScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgcm91dGUubG9hZFJvdXRlKDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oXCJsb2FkLW1hcFwiLCAnLmdweC10cmFjaycsIG1hcFV0aWxzLmxvYWRHcHhNYXApO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgJ2J1dHRvbiNzdGFydFJvdycsIGZyb250LnN0YXJ0Um93KTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbihcImNsaWNrXCIsICdidXR0b24jc3RvcFJvdycsIGZyb250LnN0b3BSb3cpO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgJy5lZGl0LXVzZXInLCB1c2VyLmVkaXRVc2VyKTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbihcImNsaWNrXCIsICcuZWRpdC1yb3V0ZScsIHJvdXRlLmVkaXRSb3V0ZSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oXCJjbGlja1wiLCAnLnN0cmF2YScsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciBocmVmID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XHJcbiAgICAgICAgJC5nZXQoaHJlZiwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgIGFsZXJ0KFwiVXBsb2FkZWQgdG8gc3RyYXZhIVwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKFwiY2xpY2tcIiwgJy5kZWwtc2Vzc2lvbicsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHZhciBuYW1lID0gJCh0aGlzKS5kYXRhKCduYW1lJyk7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IGNvbmZpcm0oXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHNlc3Npb24/XCIpO1xyXG4gICAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHVybDogJy9zZXNzaW9uL2RlbC8nICsgbmFtZSxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdERUxFVEUnLFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiU2Vzc2lvbiBkZWxldGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnkubG9hZEhpc3RvcnlJbmRleCgwLCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oXCJjbGlja1wiLCBcIiNzYXZlLXJvdXRlXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIGZvcm0gPSAkKFwiI2FkZFJvdXRlXCIpO1xyXG4gICAgICAgIHZhciByb3V0ZSA9IHt9O1xyXG4gICAgICAgIHJvdXRlLm5hbWUgPSBmb3JtLmZpbmQoJyNuYW1lJykudmFsKCk7XHJcbiAgICAgICAgcm91dGUubWV0ZXJzID0gZm9ybS5maW5kKCcjbWV0ZXJzJykudmFsKCk7XHJcbiAgICAgICAgcm91dGUuc3RyYXZhSWQgPSBmb3JtLmZpbmQoJyNzZWdtZW50SWQnKS52YWwoKTtcclxuICAgICAgICByb3V0ZS5jb3VudHJ5ID0gZm9ybS5maW5kKCcjY291bnRyaWVzJykudmFsKCk7XHJcbiAgICAgICAgcm91dGUuZ3BzID0gZm9ybS5maW5kKCd0ZXh0YXJlYScpLnZhbCgpO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdQVVQnLFxyXG4gICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICB1cmw6IFwiL3JvdXRlcy9hZGRcIixcclxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkocm91dGUpLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjYWRkLXJvdXRlLW1vZGFsJykubW9kYWwoJ2hpZGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oXCJjbGlja1wiLCBcIiNzYXZlLXVzZXJcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgZm9ybSA9ICQoXCIjYWRkVXNlckZvcm1cIik7XHJcbiAgICAgICAgdmFyIGZpcnN0TmFtZSA9IGZvcm0uZmluZCgnI2ZpcnN0TmFtZScpLnZhbCgpO1xyXG4gICAgICAgIHZhciBsYXN0TmFtZSA9IGZvcm0uZmluZCgnI2xhc3ROYW1lJykudmFsKCk7XHJcbiAgICAgICAgdmFyIGlkID0gZm9ybS5maW5kKCcjdXNlcklkJykudmFsKCk7XHJcbiAgICAgICAgdmFyIHVzZXIgPSB7fTtcclxuICAgICAgICB1c2VyLmZpcnN0TmFtZSA9IGZpcnN0TmFtZTtcclxuICAgICAgICB1c2VyLmxhc3ROYW1lID0gbGFzdE5hbWU7XHJcbiAgICAgICAgdXNlci5pZCA9IGlkO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdQVVQnLFxyXG4gICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICB1cmw6IFwiL3VzZXJzL2FkZFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh1c2VyKSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJCgnI2FkZFVzZXJNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbihcImNsaWNrXCIsICcuZGVsLXVzZXInLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgaWQgPSAkKHRoaXMpLmRhdGEoJ2lkJyk7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IGNvbmZpcm0oXCJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlP1wiKTtcclxuICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvdXNlcnMvJyArIGlkLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ0RFTEVURScsXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlci5sb2FkVXNlcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbihcImNsaWNrXCIsICcuZGVsLXJvdXRlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIGlkID0gJCh0aGlzKS5kYXRhKCdpZCcpO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBjb25maXJtKFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSByb3V0ZT9cIik7XHJcbiAgICAgICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiAnL3JvdXRlcy8nICsgaWQsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnREVMRVRFJyxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByb3V0ZS5sb2FkUm91dGUoMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoJyNsb2FkJykuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGhhc2ggPSB3aW5kb3cubG9jYXRpb24uaGFzaDtcclxuICAgICAgICBzd2l0Y2ggKGhhc2gpIHtcclxuICAgICAgICAgICAgY2FzZSAnI3JvdXRlJzpcclxuICAgICAgICAgICAgICAgIHJvdXRlLmxvYWRSb3V0ZSgwKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcjdXNlcic6XHJcbiAgICAgICAgICAgICAgICB1c2VyLmxvYWRVc2VyKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnI2hpc3RvcnknOlxyXG4gICAgICAgICAgICAgICAgaGlzdG9yeS5sb2FkSGlzdG9yeSgwKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcjc2Vzc2lvbic6XHJcbiAgICAgICAgICAgICAgICBzZXNzaW9uLmxvYWRTZXNzaW9uKHV0aWxzLlF1ZXJ5U3RyaW5nW1wibmFtZVwiXSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGZyb250LmxvYWRNYWluKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnI3JvdXRlcycpLmVhY2gocm91dGUubG9hZFJvdXRlcyk7XHJcblxyXG4gICAgJCgnI3Nlc3Npb24tdXNlcicpLmVhY2godXNlci5sb2FkVXNlcnMpO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdzaG93LmJzLm1vZGFsJywgJyNzaG93LXJvdXRlLW1vZGFsJywgcm91dGUuc2hvd1JvdXRlTW9kYWwpO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdzaG93bi5icy5tb2RhbCcsICcjc2hvdy1yb3V0ZS1tb2RhbCcsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgdmFyIG5hbWUgPSAkKGUucmVsYXRlZFRhcmdldCkuZGF0YSgncm91dGUtbmFtZScpO1xyXG4gICAgICAgIG1hcFV0aWxzLmFkZFJvdXRlVHJhY2tUb01hcChuYW1lLCAkKFwiI2xpdmUtcm91dGUtbWFwXCIpKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKFwiY2hhbmdlXCIsICcjcm91dGVzJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICB2YXIgc2VsZWN0ZWQgPSAkKCcjcm91dGVzJykuZmluZChcIjpzZWxlY3RlZFwiKTtcclxuICAgICAgICBtYXBVdGlscy5jbGVhbk1hcCgpO1xyXG4gICAgICAgIHZhciBuYW1lID0gc2VsZWN0ZWQuZGF0YSgnbmFtZScpO1xyXG4gICAgICAgIG1hcFV0aWxzLmFkZFJvdXRlVHJhY2tUb01hcChuYW1lLCAkKFwiI2xpdmUtbWFwXCIpKVxyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9